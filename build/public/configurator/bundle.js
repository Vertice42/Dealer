!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){(function(e,n,i){var r;r=function(){var t,r,o;return function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){var n=e[s][1][t];return r(n||t)}),l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),i=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),i}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,i){"use strict";var r;try{throw new Error}catch(t){r=t}var o=t("./schedule"),s=t("./queue");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function u(t){for(;t.length()>0;)c(t)}function c(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),i=t.shift();e.call(n,i)}}a.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},a.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.prototype.invokeLater=function(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()},a.prototype.invoke=function(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()},a.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},a.prototype._drainQueues=function(){u(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,u(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},n.exports=a,n.exports.firstLineError=r},{"./queue":26,"./schedule":29}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){var r=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){r||(r=!0,t.prototype._propagateFrom=i.propagateFromFunction(),t.prototype._boundValue=i.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var h=this._target();if(l._setBoundTo(c),c instanceof t){var p={promiseRejectionQueued:!1,promise:l,target:h,bindingPromise:c};h._then(e,s,void 0,l,p),c._then(a,u,void 0,l,p),l._setOnCancel(c)}else l._resolveCallback(h);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var i;"undefined"!=typeof Promise&&(i=Promise);var r=t("./promise")();r.noConflict=function(){try{Promise===r&&(Promise=i)}catch(t){}return r},e.exports=r},{"./promise":22}],5:[function(t,e,n){"use strict";var i=Object.create;if(i){var r=i(null),o=i(null);r[" size"]=o[" size"]=0}e.exports=function(e){var n=t("./util"),i=n.canEvaluate;function r(t){return function(t,i){var r;if(null!=t&&(r=t[i]),"function"!=typeof r){var o="Object "+n.classString(t)+" has no method '"+n.toString(i)+"'";throw new e.TypeError(o)}return r}(t,this.pop()).apply(t,this)}function o(t){return t[this]}function s(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=s;else if(i){var n=(void 0)(t);e=null!==n?n:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o=t("./util"),s=o.tryCatch,a=o.errorObj,u=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var i=s(t).call(this._boundValue());i===a&&(this._attachExtraTrace(i.e),u.throwLater(i.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),i=t("./es5").keys,r=n.tryCatch,o=n.errorObj;return function(t,s,a){return function(u){var c=a._boundValue();t:for(var l=0;l<t.length;++l){var h=t[l];if(h===Error||null!=h&&h.prototype instanceof Error){if(u instanceof h)return r(s).call(c,u)}else if("function"==typeof h){var p=r(h).call(c,u);if(p===o)return p;if(p)return r(s).call(c,u)}else if(n.isObject(u)){for(var d=i(h),f=0;f<d.length;++f){var m=d[f];if(h[m]!=u[m])continue t}return r(s).call(c,u)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function i(){this._trace=new i.CapturedTrace(r())}function r(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},i.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},i.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},i.CapturedTrace=null,i.create=function(){if(e)return new i},i.deactivateLongStackTraces=function(){},i.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,u=t.prototype._promiseCreated;i.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=u,e=!1},e=!0,t.prototype._pushContext=i.prototype._pushContext,t.prototype._popContext=i.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},i}},{}],9:[function(t,n,i){"use strict";n.exports=function(n,i,r,o){var s,a,u,c,l=n._async,h=t("./errors").Warning,p=t("./util"),d=t("./es5"),f=p.canAttachTrace,m=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,y=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,_=null,b=!1,C=!(0==p.env("BLUEBIRD_DEBUG")),w=!(0==p.env("BLUEBIRD_WARNINGS")||!C&&!p.env("BLUEBIRD_WARNINGS")),T=!(0==p.env("BLUEBIRD_LONG_STACK_TRACES")||!C&&!p.env("BLUEBIRD_LONG_STACK_TRACES")),P=0!=p.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(w||!!p.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var t=[];function e(){for(var e=0;e<t.length;++e)t[e]._notifyUnhandledRejection();i()}function i(){t.length=0}c=function(n){t.push(n),setTimeout(e,1)},d.defineProperty(n,"_unhandledRejectionCheck",{value:e}),d.defineProperty(n,"_unhandledRejectionClear",{value:i})}(),n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),c(this))},n.prototype._notifyUnhandledRejectionIsHandled=function(){$("rejectionHandled",s,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),$("unhandledRejection",a,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return q(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=n._getContext();a=p.contextBind(e,t)},n.onUnhandledRejectionHandled=function(t){var e=n._getContext();s=p.contextBind(e,t)};var S=function(){};n.longStackTraces=function(){if(l.haveItemsQueued()&&!nt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!nt.longStackTraces&&J()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace,r=n.prototype._dereferenceTrace;nt.longStackTraces=!0,S=function(){if(l.haveItemsQueued()&&!nt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,n.prototype._dereferenceTrace=r,i.deactivateLongStackTraces(),nt.longStackTraces=!1},n.prototype._captureStackTrace=U,n.prototype._attachExtraTrace=N,n.prototype._dereferenceTrace=W,i.activateLongStackTraces()}},n.hasLongStackTraces=function(){return nt.longStackTraces&&J()};var I={unhandledrejection:{before:function(){var t=p.global.onunhandledrejection;return p.global.onunhandledrejection=null,t},after:function(t){p.global.onunhandledrejection=t}},rejectionhandled:{before:function(){var t=p.global.onrejectionhandled;return p.global.onrejectionhandled=null,t},after:function(t){p.global.onrejectionhandled=t}}},L=function(){var t=function(t,e){if(!t)return!p.global.dispatchEvent(e);var n;try{return n=t.before(),!p.global.dispatchEvent(e)}finally{t.after(n)}};try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return p.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var i=new CustomEvent(e,{detail:n,cancelable:!0});return d.defineProperty(i,"promise",{value:n.promise}),d.defineProperty(i,"reason",{value:n.reason}),t(I[e],i)}}return"function"==typeof Event?(e=new Event("CustomEvent"),p.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var i=new Event(e,{cancelable:!0});return i.detail=n,d.defineProperty(i,"promise",{value:n.promise}),d.defineProperty(i,"reason",{value:n.reason}),t(I[e],i)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),p.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!1,!0,n),t(I[e],i)})}catch(t){}return function(){return!1}}(),M=p.isNode?function(){return e.emit.apply(e,arguments)}:p.global?function(t){var e="on"+t.toLowerCase(),n=p.global[e];return!!n&&(n.apply(p.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function E(t,e){return{promise:e}}var k={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:E},A=function(t){var e=!1;try{e=M.apply(null,arguments)}catch(t){l.throwLater(t),e=!0}var n=!1;try{n=L(t,k[t].apply(null,arguments))}catch(t){l.throwLater(t),n=!0}return n||e};function O(){return!1}function B(t,e,n){var i=this;try{t(e,n,(function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+p.toString(t));i._attachCancellationCallback(t)}))}catch(t){return t}}function R(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?p.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function F(){return this._onCancelField}function H(t){this._onCancelField=t}function x(){this._cancellationParent=void 0,this._onCancelField=void 0}function D(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&S()),"warnings"in t){var e=t.warnings;nt.warnings=!!e,P=nt.warnings,p.isObject(e)&&"wForgottenReturn"in e&&(P=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!nt.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=x,n.prototype._propagateFrom=D,n.prototype._onCancel=F,n.prototype._setOnCancel=H,n.prototype._attachCancellationCallback=R,n.prototype._execute=B,j=D,nt.cancellation=!0}if("monitoring"in t&&(t.monitoring&&!nt.monitoring?(nt.monitoring=!0,n.prototype._fireEvent=A):!t.monitoring&&nt.monitoring&&(nt.monitoring=!1,n.prototype._fireEvent=O)),"asyncHooks"in t&&p.nodeSupportsAsyncResource){var i=nt.asyncHooks,s=!!t.asyncHooks;i!==s&&(nt.asyncHooks=s,s?r():o())}return n},n.prototype._fireEvent=O,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._dereferenceTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var j=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function V(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function U(){this._trace=new tt(this._peekContext())}function N(t,e){if(f(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=z(t);p.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),p.notEnumerableProp(t,"__stackCleaned__",!0)}}}function W(){this._trace=void 0}function q(t,e,i){if(nt.warnings){var r,o=new h(t);if(e)i._attachExtraTrace(o);else if(nt.longStackTraces&&(r=n._peekContext()))r.attachExtraTrace(o);else{var s=z(o);o.stack=s.message+"\n"+s.stack.join("\n")}A("warning",o)||Y(o,"",!0)}}function G(t){for(var e=[],n=0;n<t.length;++n){var i=t[n],r="    (No stack trace)"===i||v.test(i),o=r&&K(i);r&&!o&&(b&&" "!==i.charAt(0)&&(i="    "+i),e.push(i))}return e}function z(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var i=e[n];if("    (No stack trace)"===i||v.test(i))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:G(e)}}function Y(t,e,n){if("undefined"!=typeof console){var i;if(p.isObject(t)){var r=t.stack;i=e+_(r,t)}else i=e+String(t);"function"==typeof u?u(i,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(i)}}function $(t,e,n,i){var r=!1;try{"function"==typeof e&&(r=!0,"rejectionHandled"===t?e(i):e(n,i))}catch(t){l.throwLater(t)}"unhandledRejection"===t?A(t,n,i)||r||Y(n,"Unhandled rejection "):A(t,i)}function X(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():p.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function J(){return"function"==typeof et}var K=function(){return!1},Q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Z(t){var e=t.match(Q);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function tt(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);et(this,tt),e>32&&this.uncycle()}p.inherits(tt,Error),i.CapturedTrace=tt,tt.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},i=0,r=this;void 0!==r;++i)e.push(r),r=r._parent;for(i=(t=this._length=i)-1;i>=0;--i){var o=e[i].stack;void 0===n[o]&&(n[o]=i)}for(i=0;i<t;++i){var s=n[e[i].stack];if(void 0!==s&&s!==i){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[i]._parent=void 0,e[i]._length=1;var a=i>0?e[i-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=i-2;c>=0;--c)e[c]._length=u,u++;return}}}},tt.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=z(t),n=e.message,i=[e.stack],r=this;void 0!==r;)i.push(G(r.stack.split("\n"))),r=r._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var i=t[n],r=e.length-1,o=e[r],s=-1,a=i.length-1;a>=0;--a)if(i[a]===o){s=a;break}for(a=s;a>=0;--a){var u=i[a];if(e[r]!==u)break;e.pop(),r--}e=i}}(i),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(i),p.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,i)),p.notEnumerableProp(t,"__stackCleaned__",!0)}};var et=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():X(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=t,_=e;var n=Error.captureStackTrace;return K=function(t){return m.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var i,r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,_=e,b=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){i="stack"in t}return!("stack"in r)&&i&&"number"==typeof Error.stackTraceLimit?(v=t,_=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6}):(_=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?X(e):e.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(u=function(t){console.warn(t)},p.isNode&&e.stderr.isTTY?u=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:p.isNode||"string"!=typeof(new Error).stack||(u=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var nt={warnings:w,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return T&&n.longStackTraces(),{asyncHooks:function(){return nt.asyncHooks},longStackTraces:function(){return nt.longStackTraces},warnings:function(){return nt.warnings},cancellation:function(){return nt.cancellation},monitoring:function(){return nt.monitoring},propagateFromFunction:function(){return j},boundValueFunction:function(){return V},checkForgottenReturns:function(t,e,n,i,r){if(void 0===t&&null!==e&&P){if(void 0!==r&&r._returnedNonUndefined())return;if(0==(65535&i._bitField))return;n&&(n+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),u=G(a),c=u.length-1;c>=0;--c){var l=u[c];if(!y.test(l)){var h=l.match(g);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(u.length>0){var p=u[0];for(c=0;c<a.length;++c)if(a[c]===p){c>0&&(s="\n"+a[c-1]);break}}}var d="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;i._warn(d,!0,e)}},setBounds:function(t,e){if(J()){for(var n,i,r=(t.stack||"").split("\n"),o=(e.stack||"").split("\n"),s=-1,a=-1,u=0;u<r.length;++u)if(c=Z(r[u])){n=c.fileName,s=c.line;break}for(u=0;u<o.length;++u){var c;if(c=Z(o[u])){i=c.fileName,a=c.line;break}}s<0||a<0||!n||!i||n!==i||s>=a||(K=function(t){if(m.test(t))return!0;var e=Z(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}},warn:q,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),q(n)},CapturedTrace:tt,fireDomEvent:L,fireGlobalEvent:M}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],i=function(){throw e};return this.caught(t,i)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var i=arguments[1];i instanceof t&&i.suppressUnhandledRejections();var r=function(){return i};return this.caught(n,r)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,i=t.all;function r(){return i(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(r,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,i){return n(t,i,e,0)._then(r,void 0,void 0,t,void 0)},t.mapSeries=function(t,i){return n(t,i,e,e)}}},{}],12:[function(t,e,n){"use strict";var i,r,o=t("./es5"),s=o.freeze,a=t("./util"),u=a.inherits,c=a.notEnumerableProp;function l(t,e){function n(i){if(!(this instanceof n))return new n(i);c(this,"message","string"==typeof i?i:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(n,Error),n}var h=l("Warning","warning"),p=l("CancellationError","cancellation error"),d=l("TimeoutError","timeout error"),f=l("AggregateError","aggregate error");try{i=TypeError,r=RangeError}catch(t){i=l("TypeError","type error"),r=l("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<m.length;++y)"function"==typeof Array.prototype[m[y]]&&(f.prototype[m[y]]=Array.prototype[m[y]]);o.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var g=0;function v(t){if(!(this instanceof v))return new v(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",r=i.split("\n"),o=0;o<r.length;++o)r[o]=t+r[o];e+=(i=r.join("\n"))+"\n"}return g--,e},u(v,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:p,TimeoutError:d,OperationalError:v,RejectionError:v,AggregateError:f}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:i,RangeError:r,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var i=function(){"use strict";return void 0===this}();if(i)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return s}},isES5:i,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,i){return n(this,t,i,e)},t.filter=function(t,i,r){return n(t,i,r,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util"),o=e.CancellationError,s=r.errorObj,a=t("./catch_filter")(i);function u(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function c(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function h(){return d.call(this,this.promise._target()._settledValue())}function p(t){if(!l(this,t))return s.e=t,s}function d(t){var r=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(r._boundValue()):a.call(r._boundValue(),t);if(u===i)return u;if(void 0!==u){r._setReturnedNonUndefined();var d=n(u,r);if(d instanceof e){if(null!=this.cancelPromise){if(d._isCancelled()){var f=new o("late cancellation observer");return r._attachExtraTrace(f),s.e=f,s}d.isPending()&&d._attachCancellationCallback(new c(this))}return d._then(h,p,void 0,this,void 0)}}}return r.isRejected()?(l(this),s.e=t,s):(l(this),t)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new u(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,d,d)},e.prototype.tap=function(t){return this._passThrough(t,1,d)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,d);var i,o=new Array(n-1),s=0;for(i=0;i<n-1;++i){var u=arguments[i];if(!r.isObject(u))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+r.classString(u)));o[s++]=u}o.length=s;var c=arguments[i];return this._passThrough(a(o,c,this),1,void 0,d)},u}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,s){var a=t("./errors").TypeError,u=t("./util"),c=u.errorObj,l=u.tryCatch,h=[];function p(t,n,r,o){if(s.cancellation()){var a=new e(i),u=this._finallyPromise=new e(i);this._promise=a.lastly((function(){return u})),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new e(i))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(p,o),p.prototype._isResolved=function(){return null===this._promise},p.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=l(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},p.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=l(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},p.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=l(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(t){var n=this._promise;if(t===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var i=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(i);var o=r(i,this._promise);if(o instanceof e||null!==(o=function(t,n,i){for(var o=0;o<n.length;++o){i._pushContext();var s=l(n[o])(t);if(i._popContext(),s===c){i._pushContext();var a=e.reject(c.e);return i._popContext(),a}var u=r(s,i);if(u instanceof e)return u}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(i))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,i=p,r=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new i(void 0,void 0,n,r),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("expecting a function but got "+u.classString(t));h.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=new p(t,this),r=i.promise();return i._run(e.spawn),r}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,s){var a=t("./util"),u=a.tryCatch,c=a.errorObj,l=e._async;function h(t,n,i,r){this.constructor$(t),this._promise._captureStackTrace();var s=e._getContext();if(this._callback=a.contextBind(s,n),this._preservedValues=r===o?new Array(this.length()):null,this._limit=i,this._inFlight=0,this._queue=[],l.invoke(this._asyncInit,this,void 0),a.isArray(t))for(var u=0;u<t.length;++u){var c=t[u];c instanceof e&&c.suppressUnhandledRejections()}}function p(t,n,r,o){if("function"!=typeof n)return i("expecting a function but got "+a.classString(n));var s=0;if(void 0!==r){if("object"!=typeof r||null===r)return e.reject(new TypeError("options argument must be an object but it is "+a.classString(r)));if("number"!=typeof r.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(r.concurrency)));s=r.concurrency}return new h(t,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}a.inherits(h,n),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(t,n){var i=this._values,o=this.length(),a=this._preservedValues,l=this._limit;if(n<0){if(i[n=-1*n-1]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return i[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var h=this._promise,p=this._callback,d=h._boundValue();h._pushContext();var f=u(p).call(d,t,n,o),m=h._popContext();if(s.checkForgottenReturns(f,m,null!==a?"Promise.filter":"Promise.map",h),f===c)return this._reject(f.e),!0;var y=r(f,this._promise);if(y instanceof e){var g=(y=y._target())._bitField;if(0==(50397184&g))return l>=1&&this._inFlight++,i[n]=y,y._proxy(this,-1*(n+1)),!1;if(0==(33554432&g))return 0!=(16777216&g)?(this._reject(y._reason()),!0):(this._cancel(),!0);f=y._value()}i[n]=f}return++this._totalResolved>=o&&(null!==a?this._filter(i,a):this._resolve(i),!0)},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var i=t.pop();this._promiseFulfilled(n[i],i)}},h.prototype._filter=function(t,e){for(var n=e.length,i=new Array(n),r=0,o=0;o<n;++o)t[o]&&(i[r++]=e[o]);i.length=r,this._resolve(i)},h.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return p(this,t,e,null)},e.map=function(t,e,n,i){return p(t,e,n,i)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var i=new e(n);i._captureStackTrace(),i._pushContext();var r=a(t).apply(this,arguments),s=i._popContext();return o.checkForgottenReturns(r,s,"Promise.method",i),i._resolveFromSyncValue(r),i}},e.attempt=e.try=function(t){if("function"!=typeof t)return r("expecting a function but got "+s.classString(t));var i,u=new e(n);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];i=s.isArray(c)?a(t).apply(l,c):a(t).call(l,c)}else i=a(t)();var h=u._popContext();return o.checkForgottenReturns(i,h,"Promise.try",u),u._resolveFromSyncValue(i),u},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var i=t("./util"),r=i.maybeWrapAsError,o=t("./errors").OperationalError,s=t("./es5"),a=/^(?:name|message|stack|cause)$/;function u(t){var e;if(function(t){return t instanceof Error&&s.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=s.keys(t),r=0;r<n.length;++r){var u=n[r];a.test(u)||(e[u]=t[u])}return e}return i.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,i){if(null!==t){if(n){var o=u(r(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(i);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),i=e._async,r=n.tryCatch,o=n.errorObj;function s(t,e){if(!n.isArray(t))return a.call(this,t,e);var s=r(e).apply(this._boundValue(),[null].concat(t));s===o&&i.throwLater(s.e)}function a(t,e){var n=this._boundValue(),s=void 0===t?r(e).call(n,null):r(e).call(n,null,t);s===o&&i.throwLater(s.e)}function u(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var s=r(e).call(this._boundValue(),t);s===o&&i.throwLater(s.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=a;void 0!==e&&Object(e).spread&&(n=s),this._then(n,u,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,i){"use strict";n.exports=function(){var i=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},r=function(){return new B.PromiseInspection(this._target())},o=function(t){return B.reject(new v(t))};function s(){}var a={},u=t("./util");u.setReflectHandler(r);var c=function(){var t=e.domain;return void 0===t?null:t},l=function(){return{domain:c(),async:null}},h=u.isNode&&u.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null,p=function(){return{domain:c(),async:new h("Bluebird::Promise")}},d=u.isNode?l:function(){return null};u.notEnumerableProp(B,"_getContext",d);var f=t("./es5"),m=t("./async"),y=new m;f.defineProperty(B,"_async",{value:y});var g=t("./errors"),v=B.TypeError=g.TypeError;B.RangeError=g.RangeError;var _=B.CancellationError=g.CancellationError;B.TimeoutError=g.TimeoutError,B.OperationalError=g.OperationalError,B.RejectionError=g.OperationalError,B.AggregateError=g.AggregateError;var b=function(){},C={},w={},T=t("./thenables")(B,b),P=t("./promise_array")(B,b,T,o,s),S=t("./context")(B),I=S.create,L=t("./debuggability")(B,S,(function(){d=p,u.notEnumerableProp(B,"_getContext",p)}),(function(){d=l,u.notEnumerableProp(B,"_getContext",l)})),M=(L.CapturedTrace,t("./finally")(B,T,w)),E=t("./catch_filter")(w),k=t("./nodeback"),A=u.errorObj,O=u.tryCatch;function B(t){t!==b&&function(t,e){if(null==t||t.constructor!==B)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new v("expecting a function but got "+u.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function R(t){this.promise._resolveCallback(t)}function F(t){this.promise._rejectCallback(t,!1)}function H(t){var e=new B(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return B.prototype.toString=function(){return"[object Promise]"},B.prototype.caught=B.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,i=new Array(e-1),r=0;for(n=0;n<e-1;++n){var s=arguments[n];if(!u.isObject(s))return o("Catch statement predicate: expecting an object but got "+u.classString(s));i[r++]=s}if(i.length=r,"function"!=typeof(t=arguments[n]))throw new v("The last argument to .catch() must be a function, got "+u.toString(t));return this.then(void 0,E(i,t,this))}return this.then(void 0,t)},B.prototype.reflect=function(){return this._then(r,r,void 0,this,void 0)},B.prototype.then=function(t,e){if(L.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+u.classString(t);arguments.length>1&&(n+=", "+u.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},B.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},B.prototype.spread=function(t){return"function"!=typeof t?o("expecting a function but got "+u.classString(t)):this.all()._then(t,void 0,void 0,C,void 0)},B.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},B.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new P(this).promise()},B.prototype.error=function(t){return this.caught(u.originatesFromRejection,t)},B.getNewLibraryCopy=n.exports,B.is=function(t){return t instanceof B},B.fromNode=B.fromCallback=function(t){var e=new B(b);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=O(t)(k(e,n));return i===A&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},B.all=function(t){return new P(t).promise()},B.cast=function(t){var e=T(t);return e instanceof B||((e=new B(b))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},B.resolve=B.fulfilled=B.cast,B.reject=B.rejected=function(t){var e=new B(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},B.setScheduler=function(t){if("function"!=typeof t)throw new v("expecting a function but got "+u.classString(t));return y.setScheduler(t)},B.prototype._then=function(t,e,n,i,r){var o=void 0!==r,s=o?r:new B(b),a=this._target(),c=a._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===i&&0!=(2097152&this._bitField)&&(i=0!=(50397184&c)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var l=d();if(0!=(50397184&c)){var h,p,f=a._settlePromiseCtx;0!=(33554432&c)?(p=a._rejectionHandler0,h=t):0!=(16777216&c)?(p=a._fulfillmentHandler0,h=e,a._unsetRejectionIsUnhandled()):(f=a._settlePromiseLateCancellationObserver,p=new _("late cancellation observer"),a._attachExtraTrace(p),h=e),y.invoke(f,a,{handler:u.contextBind(l,h),promise:s,receiver:i,value:p})}else a._addCallbacks(t,e,s,i,l);return s},B.prototype._length=function(){return 65535&this._bitField},B.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},B.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},B.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},B.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},B.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},B.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},B.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},B.prototype._isFinal=function(){return(4194304&this._bitField)>0},B.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},B.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},B.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},B.prototype._setAsyncGuaranteed=function(){if(!y.hasCustomScheduler()){var t=this._bitField;this._bitField=t|(536870912&t)>>2^134217728}},B.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},B.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==a)return void 0===e&&this._isBound()?this._boundValue():e},B.prototype._promiseAt=function(t){return this[4*t-4+2]},B.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},B.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},B.prototype._boundValue=function(){},B.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,i=t._promise0,r=t._receiverAt(0);void 0===r&&(r=a),this._addCallbacks(e,n,i,r,null)},B.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),r=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=a),this._addCallbacks(n,i,r,o,null)},B.prototype._addCallbacks=function(t,e,n,i,r){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=i,"function"==typeof t&&(this._fulfillmentHandler0=u.contextBind(r,t)),"function"==typeof e&&(this._rejectionHandler0=u.contextBind(r,e));else{var s=4*o-4;this[s+2]=n,this[s+3]=i,"function"==typeof t&&(this[s+0]=u.contextBind(r,t)),"function"==typeof e&&(this[s+1]=u.contextBind(r,e))}return this._setLength(o+1),o},B.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},B.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(i(),!1);var n=T(t,this);if(!(n instanceof B))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;a<s;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var u=new _("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}else this._reject(i())}},B.prototype._rejectCallback=function(t,e,n){var i=u.ensureErrorObject(t),r=i===t;if(!r&&!n&&L.warnings()){var o="a promise was rejected with a non-error: "+u.classString(t);this._warn(o,!0)}this._attachExtraTrace(i,!!e&&r),this._reject(t)},B.prototype._resolveFromExecutor=function(t){if(t!==b){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,i=this._execute(t,(function(t){e._resolveCallback(t)}),(function(t){e._rejectCallback(t,n)}));n=!1,this._popContext(),void 0!==i&&e._rejectCallback(i,!0)}},B.prototype._settlePromiseFromHandler=function(t,e,n,i){var r=i._bitField;if(0==(65536&r)){var o;i._pushContext(),e===C?n&&"number"==typeof n.length?o=O(t).apply(this._boundValue(),n):(o=A).e=new v("cannot .spread() a non-array: "+u.classString(n)):o=O(t).call(e,n);var s=i._popContext();0==(65536&(r=i._bitField))&&(o===w?i._reject(n):o===A?i._rejectCallback(o.e,!1):(L.checkForgottenReturns(o,s,"",i,this),i._resolveCallback(o)))}},B.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},B.prototype._followee=function(){return this._rejectionHandler0},B.prototype._setFollowee=function(t){this._rejectionHandler0=t},B.prototype._settlePromise=function(t,e,n,i){var o=t instanceof B,a=this._bitField,u=0!=(134217728&a);0!=(65536&a)?(o&&t._invokeInternalOnCancel(),n instanceof M&&n.isFinallyHandler()?(n.cancelPromise=t,O(e).call(n,i)===A&&t._reject(A.e)):e===r?t._fulfill(r.call(n)):n instanceof s?n._promiseCancelled(t):o||t instanceof P?t._cancel():n.cancel()):"function"==typeof e?o?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof s?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):o&&(u&&t._setAsyncGuaranteed(),0!=(33554432&a)?t._fulfill(i):t._reject(i))},B.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,i=t.receiver,r=t.value;"function"==typeof e?n instanceof B?this._settlePromiseFromHandler(e,i,r,n):e.call(i,r,n):n instanceof B&&n._reject(r)},B.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},B.prototype._settlePromise0=function(t,e,n){var i=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,t,r,e)},B.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},B.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=i();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():y.settlePromises(this),this._dereferenceTrace())}},B.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return y.fatalError(t,u.isNode);(65535&e)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled()}},B.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var i=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,e)}},B.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var i=this._rejectionHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,e)}},B.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,t),this._fulfillPromises(e,i)}this._setLength(0)}this._clearCancellationData()},B.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(B.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),B.defer=B.pending=function(){return L.deprecated("Promise.defer","new Promise"),{promise:new B(b),resolve:R,reject:F}},u.notEnumerableProp(B,"_makeSelfResolutionError",i),t("./method")(B,b,T,o,L),t("./bind")(B,b,T,L),t("./cancel")(B,P,o,L),t("./direct_resolve")(B),t("./synchronous_inspection")(B),t("./join")(B,P,T,b,y),B.Promise=B,B.version="3.7.2",t("./call_get.js")(B),t("./generators.js")(B,o,b,T,s,L),t("./map.js")(B,P,o,T,b,L),t("./nodeify.js")(B),t("./promisify.js")(B,b),t("./props.js")(B,P,T,o),t("./race.js")(B,b,T,o),t("./reduce.js")(B,P,o,T,b,L),t("./settle.js")(B,P,L),t("./some.js")(B,P,o),t("./timers.js")(B,b,L),t("./using.js")(B,o,T,I,b,L),t("./any.js")(B),t("./each.js")(B,b),t("./filter.js")(B,b),u.toFastProperties(B),u.toFastProperties(B.prototype),H({a:1}),H({b:2}),H({c:3}),H(1),H((function(){})),H(void 0),H(!1),H(new B(b)),L.setBounds(m.firstLineError,u.lastLineError),B}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o){var s=t("./util");function a(t){var i=this._promise=new e(n);t instanceof e&&(i._propagateFrom(t,3),t.suppressUnhandledRejections()),i._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.isArray,s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(n,o){var a=i(this._values,this._promise);if(a instanceof e){var u=(a=a._target())._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=r("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var r=this._promise,o=!1,s=null,a=0;a<n;++a){var u=i(t[a],r);s=u instanceof e?(u=u._target())._bitField:null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0==(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!=(33554432&s)?this._promiseFulfilled(u._value(),a):0!=(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||r._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var i={},r=t("./util"),o=t("./nodeback"),s=r.withAppended,a=r.maybeWrapAsError,u=r.canEvaluate,c=t("./errors").TypeError,l={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),p=function(t){return r.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function d(t){return!h.test(t)}function f(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function m(t,e,n){var i=r.getDataPropertyOrDefault(t,e+n,l);return!!i&&f(i)}function y(t,e,n,i){for(var o=r.inheritedDataKeys(t),s=[],a=0;a<o.length;++a){var u=o[a],l=t[u],h=i===p||p(u);"function"!=typeof l||f(l)||m(t,u,e)||!i(u,l,t,h)||s.push(u,l)}return function(t,e,n){for(var i=0;i<t.length;i+=2){var r=t[i];if(n.test(r))for(var o=r.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(s,e,n),s}var g=u?void 0:function(t,u,c,l,h,p){var d=function(){return this}(),f=t;function m(){var r=u;u===i&&(r=this);var c=new e(n);c._captureStackTrace();var l="string"==typeof f&&this!==d?this[f]:t,h=o(c,p);try{l.apply(r,s(arguments,h))}catch(t){c._rejectCallback(a(t),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof f&&(t=l),r.notEnumerableProp(m,"__isPromisified__",!0),m};function v(t,e,n,o,s){for(var a=new RegExp(e.replace(/([$])/,"\\$")+"$"),u=y(t,e,a,n),c=0,l=u.length;c<l;c+=2){var h=u[c],p=u[c+1],d=h+e;if(o===g)t[d]=g(h,i,h,p,e,s);else{var f=o(p,(function(){return g(h,i,h,p,e,s)}));r.notEnumerableProp(f,"__isPromisified__",!0),t[d]=f}}return r.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new c("expecting a function but got "+r.classString(t));if(f(t))return t;var n=function(t,e,n){return g(t,e,void 0,t,null,n)}(t,void 0===(e=Object(e)).context?i:e.context,!!e.multiArgs);return r.copyDescriptors(t,n,d),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,i=e.suffix;"string"!=typeof i&&(i="Async");var o=e.filter;"function"!=typeof o&&(o=p);var s=e.promisifier;if("function"!=typeof s&&(s=g),!r.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=r.inheritedDataKeys(t),u=0;u<a.length;++u){var l=t[a[u]];"constructor"!==a[u]&&r.isClass(l)&&(v(l.prototype,i,o,s,n),v(l,i,o,s,n))}return v(t,i,o,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o,s=t("./util"),a=s.isObject,u=t("./es5");"function"==typeof Map&&(o=Map);var c=function(){var t=0,e=0;function n(n,i){this[t]=n,this[t+e]=i,t++}return function(i){e=i.size,t=0;var r=new Array(2*i.size);return i.forEach(n,r),r}}();function l(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=c(t),n=!0;else{var i=u.keys(t),r=i.length;e=new Array(2*r);for(var s=0;s<r;++s){var a=i[s];e[s]=t[a],e[s+r]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function h(t){var n,o=i(t);return a(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,i=0;i<n;++i){var r=t[n+i],s=t[i];e.set(r,s)}return e}(this._values);else{n={};for(var i=this.length(),r=0,s=this.length();r<s;++r)n[this._values[r+i]]=this._values[r]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return h(this)},e.props=function(t){return h(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype.push=function(t,e,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var r=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[r+0&o]=t,this[r+1&o]=e,this[r+2&o]=n,this._length=i},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,i,r){for(var o=0;o<r;++o)n[o+i]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o=t("./util");function s(t,a){var u,c=i(t);if(c instanceof e)return(u=c).then((function(t){return s(t,u)}));if(null===(t=o.asArray(t)))return r("expecting an array or an iterable object but got "+o.classString(t));var l=new e(n);void 0!==a&&l._propagateFrom(a,3);for(var h=l._fulfill,p=l._reject,d=0,f=t.length;d<f;++d){var m=t[d];(void 0!==m||d in t)&&e.cast(m)._then(h,p,void 0,l,null)}return l}e.race=function(t){return s(t,void 0)},e.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,s){var a=t("./util"),u=a.tryCatch;function c(t,n,i,r){this.constructor$(t);var s=e._getContext();this._fn=a.contextBind(s,n),void 0!==i&&(i=e.resolve(i))._attachCancellationCallback(this),this._initialValue=i,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,n,r){return"function"!=typeof e?i("expecting a function but got "+a.classString(e)):new c(t,e,n,r).promise()}function p(t){this.accum=t,this.array._gotAccum(t);var n=r(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(t){var n,i=this.array,r=i._promise,o=u(i._fn);r._pushContext(),(n=void 0!==i._eachValues?o.call(r._boundValue(),t,this.index,this.length):o.call(r._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(i._currentCancellable=n);var a=r._popContext();return s.checkForgottenReturns(n,a,void 0!==i._eachValues?"Promise.each":"Promise.reduce",r),n}a.inherits(c,n),c.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},c.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},c.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},c.prototype._iterate=function(t){var n,i;this._values=t;var r=t.length;void 0!==this._initialValue?(n=this._initialValue,i=0):(n=e.resolve(t[0]),i=1),this._currentCancellable=n;for(var o=i;o<r;++o){var s=t[o];s instanceof e&&s.suppressUnhandledRejections()}if(!n.isRejected())for(;i<r;++i){var a={accum:null,value:t[i],index:i,length:r,array:this};n=n._then(p,void 0,void 0,a,void 0),0==(127&i)&&n._setNoAsyncGuarantee()}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(l,l,void 0,n,this)},e.prototype.reduce=function(t,e){return h(this,t,e,null)},e.reduce=function(t,e,n,i){return h(t,e,n,i)}}},{"./util":36}],29:[function(t,r,o){"use strict";var s,a,u,c,l,h=t("./util"),p=h.getNativePromise();if(h.isNode&&"undefined"==typeof MutationObserver){var d=n.setImmediate,f=e.nextTick;s=h.isRecentNode?function(t){d.call(n,t)}:function(t){f.call(e,t)}}else if("function"==typeof p&&"function"==typeof p.resolve){var m=p.resolve();s=function(t){m.then(t)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?void 0!==i?function(t){i(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(a=document.createElement("div"),u={attributes:!0},c=!1,l=document.createElement("div"),new MutationObserver((function(){a.classList.toggle("foo"),c=!1})).observe(l,u),function(t){var e=new MutationObserver((function(){e.disconnect(),t()}));e.observe(a,u),c||(c=!0,l.classList.toggle("foo"))});r.exports=s},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,n),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new r;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new r;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return i.deprecated(".settle()",".reflect()"),new o(t).promise()},e.allSettled=function(t){return new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util"),o=t("./errors").RangeError,s=t("./errors").AggregateError,a=r.isArray,u={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(t,e){if((0|e)!==e||e<0)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),r=n.promise();return n.setHowMany(e),n.init(),r}r.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return l(t,e)},e.prototype.some=function(t){return l(this,t)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return r.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),i.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var i=t("./util"),r=i.errorObj,o=i.isObject,s={}.hasOwnProperty;return function(t,a){if(o(t)){if(t instanceof e)return t;var u=function(t){try{return function(t){return t.then}(t)}catch(t){return r.e=t,r}}(t);if(u===r){a&&a._pushContext();var c=e.reject(u.e);return a&&a._popContext(),c}if("function"==typeof u)return function(t){try{return s.call(t,"_promise0")}catch(t){return!1}}(t)?(c=new e(n),t._then(c._fulfill,c._reject,void 0,c,null),c):function(t,o,s){var a=new e(n),u=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var c=i.tryCatch(o).call(t,(function(t){a&&(a._resolveCallback(t),a=null)}),(function(t){a&&(a._rejectCallback(t,!1,!0),a=null)}));return a&&c===r&&(a._rejectCallback(c.e,!0,!0),a=null),u}(t,u,a)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util"),o=e.TimeoutError;function s(t){this.handle=t}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,r){var o,u;return void 0!==r?(o=e.resolve(r)._then(a,null,null,t,void 0),i.cancellation()&&r instanceof e&&o._setOnCancel(r)):(o=new e(n),u=setTimeout((function(){o._fulfill()}),+t),i.cancellation()&&o._setOnCancel(new s(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(t){return clearTimeout(this.handle),t}function l(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return u(t,this)},e.prototype.timeout=function(t,e){var n,a;t=+t;var u=new s(setTimeout((function(){n.isPending()&&function(t,e,n){var i;i="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),r.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._reject(i),null!=n&&n.cancel()}(n,e,a)}),t));return i.cancellation()?(a=this.then(),(n=a._then(c,l,void 0,u,void 0))._setOnCancel(u)):n=this._then(c,l,void 0,u,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,s){var a=t("./util"),u=t("./errors").TypeError,c=t("./util").inherits,l=a.errorObj,h=a.tryCatch,p={};function d(t){setTimeout((function(){throw t}),0)}function f(t,n){var r=0,s=t.length,a=new e(o);return function o(){if(r>=s)return a._fulfill();var u=function(t){var e=i(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[r++]);if(u instanceof e&&u._isDisposable()){try{u=i(u._getDisposer().tryDispose(n),t.promise)}catch(t){return d(t)}if(u instanceof e)return u._then(o,d,null,null,null)}o()}(),a}function m(t,e,n){this._data=t,this._promise=e,this._context=n}function y(t,e,n){this.constructor$(t,e,n)}function g(t){return m.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function v(t){this.length=t,this.promise=null,this[t-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():p},m.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=e!==p?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,i},m.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(y,m),y.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},v.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var i=this[n];i instanceof e&&i.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var r,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+a.classString(o));var u=!0;2===t&&Array.isArray(arguments[0])?(t=(r=arguments[0]).length,u=!1):(r=arguments,t--);for(var c=new v(t),p=0;p<t;++p){var d=r[p];if(m.isDisposer(d)){var y=d;(d=d.promise())._setDisposable(y)}else{var _=i(d);_ instanceof e&&(d=_._then(g,null,null,{resources:c,index:p},void 0))}c[p]=d}var b=new Array(c.length);for(p=0;p<b.length;++p)b[p]=e.resolve(c[p]).reflect();var C=e.all(b).then((function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void C.cancel();t[e]=n.value()}w._pushContext(),o=h(o);var i=u?o.apply(void 0,t):o(t),r=w._popContext();return s.checkForgottenReturns(i,r,"Promise.using",w),i})),w=C.lastly((function(){var t=new e.PromiseInspection(C);return f(c,t)}));return c.promise=w,w._setOnCancel(c),w},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new y(t,this,r());throw new u}}},{"./errors":12,"./util":36}],36:[function(t,i,r){"use strict";var o=t("./es5"),s="undefined"==typeof navigator,a={e:{}},u,c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function l(){try{var t=u;return u=null,t.apply(this,arguments)}catch(t){return a.e=t,a}}function h(t){return u=t,l}var p=function(t,e){var n={}.hasOwnProperty;function i(){for(var i in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,i)&&"$"!==i.charAt(i.length-1)&&(this[i+"$"]=e.prototype[i])}return i.prototype=e.prototype,t.prototype=new i,t.prototype};function d(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function f(t){return"function"==typeof t||"object"==typeof t&&null!==t}function m(t){return d(t)?new Error(L(t)):t}function y(t,e){var n,i=t.length,r=new Array(i+1);for(n=0;n<i;++n)r[n]=t[n];return r[n]=e,r}function g(t,e,n){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function v(t,e,n){if(d(t))return t;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,i),t}function _(t){throw t}var b=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var i=[],r=Object.create(null);null!=t&&!e(t);){var s;try{s=n(t)}catch(t){return i}for(var a=0;a<s.length;++a){var u=s[a];if(!r[u]){r[u]=!0;var c=Object.getOwnPropertyDescriptor(t,u);null!=c&&null==c.get&&null==c.set&&i.push(u)}}t=o.getPrototypeOf(t)}return i}}var i={}.hasOwnProperty;return function(n){if(e(n))return[];var r=[];t:for(var o in n)if(i.call(n,o))r.push(o);else{for(var s=0;s<t.length;++s)if(i.call(t[s],o))continue t;r.push(o)}return r}}(),C=/this\s*\.\s*\S+\s*=/;function w(t){try{if("function"==typeof t){var e=o.names(t.prototype),n=o.isES5&&e.length>1,i=e.length>0&&!(1===e.length&&"constructor"===e[0]),r=C.test(t+"")&&o.names(t).length>0;if(n||i||r)return!0}return!1}catch(t){return!1}}function T(t){function e(){}e.prototype=t;var n=new e;function i(){return typeof n.foo}return i(),i(),t}var P=/^[a-z$_][a-z$_0-9]*$/i;function S(t){return P.test(t)}function I(t,e,n){for(var i=new Array(t),r=0;r<t;++r)i[r]=e+r+n;return i}function L(t){try{return t+""}catch(t){return"[no string representation]"}}function M(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function E(t){try{v(t,"isOperational",!0)}catch(t){}}function k(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function A(t){return M(t)&&o.propertyIsWritable(t,"stack")}var O="stack"in new Error?function(t){return A(t)?t:new Error(L(t))}:function(t){if(A(t))return t;try{throw new Error(L(t))}catch(t){return t}};function B(t){return{}.toString.call(t)}function R(t,e,n){for(var i=o.names(t),r=0;r<i.length;++r){var s=i[r];if(n(s))try{o.defineProperty(e,s,o.getDescriptor(t,s))}catch(t){}}}var F=function(t){return o.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var H="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],i=t[Symbol.iterator]();!(e=i.next()).done;)n.push(e.value);return n};F=function(t){return o.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?H(t):null}}var x=void 0!==e&&"[object process]"===B(e).toLowerCase(),D=void 0!==e&&void 0!==e.env,j;function V(t){return D?e.env[t]:void 0}function U(){if("function"==typeof Promise)try{if("[object Promise]"===B(new Promise((function(){}))))return Promise}catch(t){}}function N(t,e){if(null===t||"function"!=typeof e||e===j)return e;null!==t.domain&&(e=t.domain.bind(e));var n=t.async;if(null!==n){var i=e;e=function(){var t=new Array(2).concat([].slice.call(arguments));return t[0]=i,t[1]=this,n.runInAsyncScope.apply(n,t)}}return e}var W={setReflectHandler:function(t){j=t},isClass:w,isIdentifier:S,inheritedDataKeys:b,getDataPropertyOrDefault:g,thrower:_,isArray:o.isArray,asArray:F,notEnumerableProp:v,isPrimitive:d,isObject:f,isError:M,canEvaluate:s,errorObj:a,tryCatch:h,inherits:p,withAppended:y,maybeWrapAsError:m,toFastProperties:T,filledRange:I,toString:L,canAttachTrace:A,ensureErrorObject:O,originatesFromRejection:k,markAsOriginatingFromRejection:E,classString:B,copyDescriptors:R,isNode:x,hasEnvVariables:D,env:V,global:c,getNativePromise:U,contextBind:N},q;W.isRecentNode=W.isNode&&(e.versions&&e.versions.node?q=e.versions.node.split(".").map(Number):e.version&&(q=e.version.split(".").map(Number)),0===q[0]&&q[1]>10||q[0]>0),W.nodeSupportsAsyncResource=W.isNode&&function(){var e=!1;try{e="function"==typeof t("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(t){e=!1}return e}(),W.isNode&&W.toFastProperties(e);try{throw new Error}catch(t){W.lastLineError=t}i.exports=W},{"./es5":13,async_hooks:void 0}]},{},[4])(4)},t.exports=r(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(5),n(7),n(74).setImmediate)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={URL:"https://dealerextension-ddns-net.umbler.net"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotifyViewers=e.Texts=e.STREAMER_SOCKET=void 0;const i=n(41),r=n(70),o=n(78),s=n(85),a=n(89),u=n(95),c=n(13),l=n(39),h=n(99),p=n(14),d=n(23),f=n(100),m=n(101),y=n(1);e.STREAMER_SOCKET=i(y.default.URL);var g=!1;e.NotifyViewers=function(t){window.Twitch.ext.send("broadcast","json",JSON.stringify(t))},window.Twitch.ext.onAuthorized(async t=>{var n=navigator.language.toLowerCase()||"en";h.InsertTextInHardCode(await p.getLocaleFile("view_config_hard_code",n)),e.Texts?e.Texts.update(await p.getLocaleFile("view_config",n)):e.Texts=new h.LocalizedTexts(await p.getLocaleFile("view_config",n)),e.STREAMER_SOCKET.emit(c.default.RegisterStreamer,t.channelId),e.STREAMER_SOCKET.on("connect",()=>{e.STREAMER_SOCKET.emit(c.default.RegisterStreamer,t.channelId)}),e.STREAMER_SOCKET.on(c.default.onStreamerAsRegistered,async()=>{g||(g=!0,new l.ViewMain,d.ViewAdvertisement.onAdvertisementButtonActive=()=>{window.Twitch.ext.bits.onTransactionComplete(async e=>{await f.updateTransitionsByUser(new m.UpdateTransitionsByUserRequest(t.token,e)),d.ViewAdvertisement.Hide()}),window.Twitch.ext.bits.useBits("Premium"),window.Twitch.ext.bits.onTransactionCancelled(()=>{d.ViewAdvertisement.Hide()})},new r.default(t.token,t.channelId),new o.default(t.token,t.channelId),new s.default(t.token,t.channelId),new a.default(t.token,t.channelId,e.STREAMER_SOCKET),new u.default(t.token,t.channelId))})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckWord=e.hexToRgb=e.sleep=e.isEquivalent=void 0,e.isEquivalent=function(t,e){if(!t||!e)return!1;var n=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(e);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var o=n[r];if(t[o]!==e[o])return!1}return!0},e.sleep=function(t){return new Promise(e=>setTimeout(e,t))},e.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},e.CheckWord=function(t,e){let n=t.toLowerCase();"s"===n.charAt(n.length-1)&&(n=n.substring(0,n.length-1));for(const t of e)if(n===t)return!0;return!1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetTransitionsByUser=e.UpdateTransitionsByUser=e.getLocale=e.GetLocale=e.getWalletSkinImage=e.GetWalletSkinImage=e.GetWalletSkins=e.getFilesRoute=e.GetFileRoute=e.UploadFileRoute=e.WalletManager=e.getWalletRoute=e.GetWalletRoute=e.getWalletsRoute=e.GetWalletsRoute=e.getCoinsSettingsRoute=e.GetCoinsSettingsRoute=e.CoinsSettingsManagerRoute=e.getMinerSettingsRoute=e.GetMinerSettingsRoute=e.MinerManagerRoute=e.getStoreRoute=e.GetStoreRoute=e.StoreManagerRoute=e.getPurchaseOrderRoute=e.GetPurchaseOrderRoute=e.PurchaseOrderRoute=e.MineCoinRoute=e.AddBetRoute=e.getPollRoute=e.GetPollRoute=e.PollManagerRoute=void 0,e.PollManagerRoute="/PollManager",e.GetPollRoute="/Poll/:StreamerID",e.getPollRoute=t=>"/Poll/"+t,e.AddBetRoute="/addBet",e.MineCoinRoute="/MinerCoin",e.PurchaseOrderRoute="/BuyStoreItem",e.GetPurchaseOrderRoute="/PurchaseOrder/:StreamerID/:StoreItemID",e.getPurchaseOrderRoute=(t,e)=>{let n="*";return e&&(n=e),"/PurchaseOrder/"+t+"/"+n},e.StoreManagerRoute="/StoreManager",e.GetStoreRoute="/Store/:StreamerID/:StoreItemID",e.getStoreRoute=(t,e)=>"/Store/"+t+"/"+e,e.MinerManagerRoute="/MinerManager",e.GetMinerSettingsRoute="/MinerSettings/:StreamerID",e.getMinerSettingsRoute=t=>"/MinerSettings/"+t,e.CoinsSettingsManagerRoute="/CoinsSettingsManager/",e.GetCoinsSettingsRoute="/CoinsSettings/:StreamerID",e.getCoinsSettingsRoute=t=>"/CoinsSettings/"+t,e.GetWalletsRoute="/Wallets/:StreamerID/:TwitchUserID",e.getWalletsRoute=(t,e="*")=>"/Wallets/"+t+"/"+e,e.GetWalletRoute="/Wallet/:StreamerID/:TwitchUserID",e.getWalletRoute=(t,e)=>"/Wallet/"+t+"/"+e,e.WalletManager="/Wallets/",e.UploadFileRoute="/UploadFiles",e.GetFileRoute="/Files/:StreamerID/:Folder/:FileName",e.getFilesRoute=(t,e,n)=>`/Files/${t}/${e}/${n}`,e.GetWalletSkins="/GetWalletSkins",e.GetWalletSkinImage="/WalletSkinImages/:SkinImageName/:MaskNumber",e.getWalletSkinImage=(t,e)=>"/WalletSkinImages/"+t+"/"+e.toString(),e.GetLocale="/Locales/:ViewName/:Language",e.getLocale=(t,e)=>"/Locales/"+t+"/"+e,e.UpdateTransitionsByUser="/UpdateTransitionsByUser",e.GetTransitionsByUser="/GetTransitionsByUser"},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],l=!1,h=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var t=a(p);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){var i,r=n(56),o=n(30),s=n(58),a=n(59),u=n(60);"undefined"!=typeof ArrayBuffer&&(i=n(61));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=c||l;e.protocol=3;var p=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=r(p),f={type:"error",data:"parser error"},m=n(62);function y(t,e,n){for(var i=new Array(t.length),r=a(t.length,n),o=function(t,n,r){e(n,(function(e,n){i[t]=n,r(e,i)}))},s=0;s<t.length;s++)o(s,t[s],r)}e.encodePacket=function(t,n,i,r){"function"==typeof n&&(r=n,n=!1),"function"==typeof i&&(r=i,i=null);var o=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=t.data,o=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=p[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}(t,n,r);if(void 0!==m&&o instanceof m)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);if(h)return function(t,n,i){if(!n)return e.encodeBase64Packet(t,i);var r=new FileReader;return r.onload=function(){e.encodePacket({type:t.type,data:r.result},n,!0,i)},r.readAsArrayBuffer(t.data)}(t,n,i);var r=new Uint8Array(1);r[0]=p[t.type];var o=new m([r.buffer,t.data]);return i(o)}(t,n,r);if(o&&o.base64)return function(t,n){var i="b"+e.packets[t.type]+t.data.data;return n(i)}(t,r);var s=p[t.type];return void 0!==t.data&&(s+=i?u.encode(String(t.data),{strict:!1}):String(t.data)),r(""+s)},e.encodeBase64Packet=function(t,n){var i,r="b"+e.packets[t.type];if(void 0!==m&&t.data instanceof m){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];n(r+t)},o.readAsDataURL(t.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),u=0;u<s.length;u++)a[u]=s[u];i=String.fromCharCode.apply(null,a)}return r+=btoa(i),n(r)},e.decodePacket=function(t,n,i){if(void 0===t)return f;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(i&&!1===(t=function(t){try{t=u.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return f;var r=t.charAt(0);return Number(r)==r&&d[r]?t.length>1?{type:d[r],data:t.substring(1)}:{type:d[r]}:f}r=new Uint8Array(t)[0];var o=s(t,1);return m&&"blob"===n&&(o=new m([o])),{type:d[r],data:o}},e.decodeBase64Packet=function(t,e){var n=d[t.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=i.decode(t.substr(1));return"blob"===e&&m&&(r=new m([r])),{type:n,data:r}},e.encodePayload=function(t,n,i){"function"==typeof n&&(i=n,n=null);var r=o(t);if(n&&r)return m&&!h?e.encodePayloadAsBlob(t,i):e.encodePayloadAsArrayBuffer(t,i);if(!t.length)return i("0:");y(t,(function(t,i){e.encodePacket(t,!!r&&n,!1,(function(t){i(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return i(e.join(""))}))},e.decodePayload=function(t,n,i){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,i);var r;if("function"==typeof n&&(i=n,n=null),""===t)return i(f,0,1);for(var o,s,a="",u=0,c=t.length;u<c;u++){var l=t.charAt(u);if(":"===l){if(""===a||a!=(o=Number(a)))return i(f,0,1);if(a!=(s=t.substr(u+1,o)).length)return i(f,0,1);if(s.length){if(r=e.decodePacket(s,n,!1),f.type===r.type&&f.data===r.data)return i(f,0,1);if(!1===i(r,u+o,c))return}u+=o,a=""}else a+=l}return""!==a?i(f,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));y(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){return n(null,t)}))}),(function(t,e){var i=e.reduce((function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2}),0),r=new Uint8Array(i),o=0;return e.forEach((function(t){var e="string"==typeof t,n=t;if(e){for(var i=new Uint8Array(t.length),s=0;s<t.length;s++)i[s]=t.charCodeAt(s);n=i.buffer}r[o++]=e?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)r[o++]=parseInt(a[s]);r[o++]=255;for(i=new Uint8Array(n),s=0;s<i.length;s++)r[o++]=i[s]})),n(r.buffer)}))},e.encodePayloadAsBlob=function(t,n){y(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);t=i.buffer,e[0]=0}var o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),s=new Uint8Array(o.length+1);for(r=0;r<o.length;r++)s[r]=parseInt(o[r]);if(s[o.length]=255,m){var a=new m([e.buffer,s.buffer,t]);n(null,a)}}))}),(function(t,e){return n(new m(e))}))},e.decodePayloadAsBinary=function(t,n,i){"function"==typeof n&&(i=n,n=null);for(var r=t,o=[];r.byteLength>0;){for(var a=new Uint8Array(r),u=0===a[0],c="",l=1;255!==a[l];l++){if(c.length>310)return i(f,0,1);c+=a[l]}r=s(r,2+c.length),c=parseInt(c);var h=s(r,0,c);if(u)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(t){var p=new Uint8Array(h);h="";for(l=0;l<p.length;l++)h+=String.fromCharCode(p[l])}o.push(h),r=s(r,c)}var d=o.length;o.forEach((function(t,r){i(e.decodePacket(t,n,!0),r,d)}))}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(i){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(i++,"%c"===t&&(r=i))}),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(43)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(5))},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(i){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(i++,"%c"===t&&(r=i))}),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(63)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(5))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={onStoreChange:"0",onAddPurchasedItem:"1",onDeletePurchaseOrder:"2",onPollChange:"3",onCoinNameChange:"4"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ServerAsStarted:"ServerAsStarted",RegisterStreamer:"RegisterStreamer",UploadProgress:"UploadProgress",onStreamerAsRegistered:"StreamerAsRegistered",onItemsChange:"ItemsChange",onAddPurchasedItem:"PurchasedItem",onDeletePurchasedItem:"DeletePurchasedItem",onDistributionFinish:"DistributionsFinish"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLocaleFile=e.getWalletSkins=e.getURLOfWalletSkinsImg=e.getUrlOfFile=e.UploadFile=void 0;const i=n(4),r=n(0),o=n(1);e.UploadFile=async function(t,e,n,s){let a=new Headers;return a.append("Accept","application/json"),a.append("token",t),a.append("file-name",n),a.append("file-id",e),fetch(o.default.URL+i.UploadFileRoute,{method:"POST",headers:a,body:s}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.getUrlOfFile=function(t,e,n){return o.default.URL+i.getFilesRoute(t,e,n)},e.getURLOfWalletSkinsImg=function(t,e){return o.default.URL+i.getWalletSkinImage(t,e)},e.getWalletSkins=async function(){return fetch(o.default.URL+i.GetWalletSkins,{method:"GET"}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.getLocaleFile=async function(t,e){return fetch(o.default.URL+i.getLocale(t,e),{method:"GET"}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))}},function(t,e,n){var i=n(45)("socket.io-parser"),r=n(16),o=n(48),s=n(25),a=n(26);function u(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=u,e.Decoder=h;var c=e.ERROR+'"encode error"';function l(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var r=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===r)return c;n+=r}return i("encoded %j as %s",t,n),n}function h(){this.reconstructor=null}function p(t){this.reconPack=t,this.buffers=[]}function d(t){return{type:e.ERROR,data:"parser error: "+t}}u.prototype.encode=function(t,n){(i("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)?function(t,e){o.removeBlobs(t,(function(t){var n=o.deconstructPacket(t),i=l(n.packet),r=n.buffers;r.unshift(i),e(r)}))}(t,n):n([l(t)])},r(h.prototype),h.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return d("unknown packet type "+r.type);if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var o="";"-"!==t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(n+1))for(r.nsp="";++n;){if(","===(u=t.charAt(n)))break;if(r.nsp+=u,n===t.length)break}else r.nsp="/";var a=t.charAt(n+1);if(""!==a&&Number(a)==a){for(r.id="";++n;){var u;if(null==(u=t.charAt(n))||Number(u)!=u){--n;break}if(r.id+=t.charAt(n),n===t.length)break}r.id=Number(r.id)}if(t.charAt(++n)){var c=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(n));if(!(!1!==c&&(r.type===e.ERROR||s(c))))return d("invalid payload");r.data=c}return i("decoded %s as %j",t,r),r}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(49),r=n(50),o=n(51);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function f(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(i)return V(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return L(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,i,r);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,i,r){var o,s=1,a=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var l=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var h=!0,p=0;p<u;p++)if(c(t,o+p)!==c(e,p)){h=!1;break}if(h)return o}return-1}function _(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,i){return N(V(e,t.length-n),t,n,i)}function C(t,e,n,i){return N(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function w(t,e,n,i){return C(t,e,n,i)}function T(t,e,n,i){return N(U(e),t,n,i)}function P(t,e,n,i){return N(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function S(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,u,c=t[r],l=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[r+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),r+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,i){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=u.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,i,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(i,r),l=t.slice(e,n),h=0;h<a;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function M(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function E(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=j(t[o]);return r}function k(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function A(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,i,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function B(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function R(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function F(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(t,e,n,i,o){return o||F(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function x(t,e,n,i,o){return o||F(t,0,n,8),r.write(t,e,n,i,52,8),n+8}u.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;n=new u(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},u.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||A(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||O(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||O(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return H(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return H(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return x(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return x(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:V(new u(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(7))},function(t,e,n){var i=n(54);t.exports=function(t){var e=t.xdomain,n=t.xscheme,r=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||i))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(t){}if(!e)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},function(t,e,n){var i=n(6),r=n(20);function o(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=o,r(o.prototype),o.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},o.prototype.onPacket=function(t){this.emit("packet",t)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResponsiveInputFile=e.OrientedInput=e.ResponsiveInput=void 0;class i{constructor(t){this.HTML=t}setChangedInput(){this.HTML.classList.remove("InputSentSuccessfully"),this.HTML.classList.remove("UnchangedInput"),this.HTML.classList.remove("InputSentError"),this.HTML.classList.add("ChangedInput")}setUnchangedInput(){this.HTML.classList.remove("InputSentSuccessfully"),this.HTML.classList.remove("ChangedInput"),this.HTML.classList.remove("InputSentError"),this.HTML.classList.add("UnchangedInput")}setInputSuccessfully(){this.HTML.classList.remove("ChangedInput"),this.HTML.classList.remove("UnchangedInput"),this.HTML.classList.remove("InputSentError"),this.HTML.classList.add("InputSentSuccessfully")}setInputError(){this.HTML.classList.remove("InputSentSuccessfully"),this.HTML.classList.remove("ChangedInput"),this.HTML.classList.remove("ChangedInput"),this.HTML.classList.add("InputSentError")}}e.ResponsiveInput=i;e.OrientedInput=class extends i{constructor(t,e="",n=7,i="0",r="9999999"){super(document.createElement("input")),this._Guidance="",this.Type=t,this.HTML.classList.add(e),this.HTML.maxLength=n,this.HTML.min=i,this.HTML.max=r,this.HTML.type="text",this.HTML.addEventListener("focusout",()=>{""===this.HTML.value&&(this.HTML.type="text",this.HTML.classList.add("InputNotUsed"),this.HTML.classList.remove("InputUsed"),this.HTML.value=this.Guidance)}),this.HTML.onfocus=()=>{this.HTML.classList.contains("InputNotUsed")&&(this.HTML.type=t,this.setUsed(),this.HTML.value="")}}setUsed(){this.HTML.type=this.Type,this.HTML.classList.add("InputUsed"),this.HTML.classList.remove("InputNotUsed")}setNotUsed(){this.HTML.classList.add("UnchangedInput"),this.HTML.classList.add("InputNotUsed")}get value(){return this.HTML.value}set value(t){this.HTML.value=t,this.setUsed()}get Guidance(){return this._Guidance}set Guidance(t){this._Guidance=t,""===this.HTML.value&&(this.HTML.value=this.Guidance,this.setNotUsed())}};e.ResponsiveInputFile=class{constructor(t,e){this.HTML=document.createElement("div"),this.HTML_InputFile=document.createElement("input"),this.HTML_InputFile.setAttribute("type","file"),this.HTML_InputFile.classList.add("InputFile"),this.HTML_InputFile.name="file",this.HTML_InputFile.accept=e,this.HTML_InputFile.id=t,this.HTML.appendChild(this.HTML_InputFile),this.HTML_LabelForInput=document.createElement("label"),this.HTML.classList.add("AddUpdateFileIconDiv"),this.HTML_LabelForInput=document.createElement("label"),this.HTML_LabelForInput.classList.add("AddUpdateFileIcon"),this.HTML_LabelForInput.classList.add("Default"),this.HTML_LabelForInput.htmlFor=t,this.HTML_InputFile.addEventListener("focus",()=>{this.HTML_LabelForInput.classList.add("AddUpdateFileIconInFocus")}),this.HTML_InputFile.addEventListener("focusout",()=>{this.HTML_LabelForInput.classList.remove("AddUpdateFileIconInFocus")}),this.HTML.appendChild(this.HTML_LabelForInput),this.HTML_PercentageSpan=document.createElement("span"),this.HTML_PercentageSpan.classList.add("PercentageSpan"),this.HTML.appendChild(this.HTML_PercentageSpan)}setDefault(){this.HTML_LabelForInput.classList.remove("Upgradeable"),this.HTML_LabelForInput.classList.remove("InUpload"),this.HTML_LabelForInput.classList.add("Default"),this.HTML_PercentageSpan.style.display="none"}setUpgradeable(){this.HTML_LabelForInput.classList.remove("Default"),this.HTML_LabelForInput.classList.remove("InUpload"),this.HTML_LabelForInput.classList.add("Upgradeable"),this.HTML_PercentageSpan.style.display="none",this.HTML_LabelForInput.style.backgroundImage=""}setInUpload(){this.HTML_LabelForInput.classList.remove("Default"),this.HTML_LabelForInput.classList.remove("Upgradeable"),this.HTML_LabelForInput.classList.add("InUpload"),this.HTML_PercentageSpan.style.display=""}setUploadPercentage(t){this.UploadPercentage!==t&&(this.UploadPercentage=t,this.HTML_LabelForInput.style.backgroundImage=`radial-gradient(white 40%,#ffffff00 60%),\n      conic-gradient(rgb(255, 255, 255) 3% ,#fff ${this.UploadPercentage}% ,\n      rgb(0, 102, 255) ${this.UploadPercentage+2}% )`,this.HTML_PercentageSpan.innerText=Math.round(t)+"%")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getItemsSetting=e.StoreTypes=void 0,e.StoreTypes={Audio:1},e.getItemsSetting=function(t,e){for(const n of e)if(n.DonorFeatureName===t)return n};e.default=class{constructor(t,e,n,i=null,r,o){this.id=t,this.Type=e,this.Description=n,this.FileName=r,this.ItemsSettings=i,this.Price=o}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewAdvertisement=void 0;const i=n(3),r=n(39);let o=(()=>{class t{constructor(){t.HTML_CloseAdvertisementButton.onclick=()=>{t.Hide()},t.HTML_AdvertisementButton.onclick=()=>{t.onAdvertisementButtonActive()}}static Show(){t.HTML_AdvertisementDiv.style.display="",t.HTML_AdvertisementDiv.classList.remove("AdvertisementHide"),t.HTML_AdvertisementDiv.classList.add("AdvertisementSample"),r.ViewMain.Hide()}static async Hide(){t.HTML_AdvertisementDiv.classList.remove("AdvertisementSample"),t.HTML_AdvertisementDiv.classList.add("AdvertisementHide"),await i.sleep(1100),t.HTML_AdvertisementDiv.style.display="none",r.ViewMain.Show()}}return t.onAdvertisementButtonActive=()=>{},t.HTML_AdvertisementDiv=document.getElementById("AdvertisementDiv"),t.HTML_CloseAdvertisementButton=document.getElementById("CloseAdvertisementButton"),t.HTML_AdvertisementButton=document.getElementById("AdvertisementButton"),t})();e.ViewAdvertisement=o},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,r=t.indexOf("["),o=t.indexOf("]");-1!=r&&-1!=o&&(t=t.substring(0,r)+t.substring(r,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},u=14;u--;)a[i[u]]=s[u]||"";return-1!=r&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(e){t.exports=function(t){return n&&e.isBuffer(t)||i&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))};var n="function"==typeof e&&"function"==typeof e.isBuffer,i="function"==typeof ArrayBuffer}).call(this,n(17).Buffer)},function(t,e,n){var i=n(52),r=n(33),o=n(16),s=n(15),a=n(34),u=n(35),c=n(8)("socket.io-client:manager"),l=n(32),h=n(69),p=Object.prototype.hasOwnProperty;function d(t,e){if(!(this instanceof d))return new d(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||s;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=d,d.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},d.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},d.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},o(d.prototype),d.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},d.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},d.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(t,e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=a(n,"open",(function(){r.onopen(),t&&t()})),s=a(n,"error",(function(e){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var u=this._timeout;c("connect attempt will timeout after %d",u);var l=setTimeout((function(){c("connect attempt timed out after %d",u),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",u)}),u);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(o),this.subs.push(s),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",u(this,"ondata"))),this.subs.push(a(t,"ping",u(this,"onping"))),this.subs.push(a(t,"pong",u(this,"onpong"))),this.subs.push(a(t,"error",u(this,"onerror"))),this.subs.push(a(t,"close",u(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",u(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(t){this.decoder.add(t)},d.prototype.ondecoded=function(t){this.emit("packet",t)},d.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},d.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new r(this,t,e),this.nsps[t]=n;var i=this;n.on("connecting",o),n.on("connect",(function(){n.id=i.generateId(t)})),this.autoConnect&&o()}function o(){~l(i.connecting,n)||i.connecting.push(n)}return n},d.prototype.destroy=function(t){var e=l(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},d.prototype.packet=function(t){c("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var i=0;i<n.length;i++)e.engine.write(n[i],t.options);e.encoding=!1,e.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},d.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){var i=n(18),r=n(55),o=n(65),s=n(66);e.polling=function(t){var e=!1,n=!1,s=!1!==t.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,u=location.port;u||(u=a?443:80),e=t.hostname!==location.hostname||u!==t.port,n=t.secure!==a}if(t.xdomain=e,t.xscheme=n,"open"in new i(t)&&!t.forceJSONP)return new r(t);if(!s)throw new Error("JSONP disabled");return new o(t)},e.websocket=s},function(t,e,n){var i=n(19),r=n(9),o=n(6),s=n(10),a=n(31),u=n(11)("engine.io-client:polling");t.exports=l;var c=null!=new(n(18))({xdomain:!1}).responseType;function l(t){var e=t&&t.forceBase64;c&&!e||(this.supportsBinary=!1),i.call(this,t)}s(l,i),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(t){var e=this;function n(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(u("we are currently polling - waiting to pause"),i++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--i||n()}))),this.writable||(u("we are currently writing - waiting to pause"),i++,this.once("drain",(function(){u("pre-pause writing complete"),--i||n()})))}else n()},l.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(t){var e=this;u("polling got data %s",t);o.decodePayload(t,this.socket.binaryType,(function(t,n,i){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},l.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};o.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,n)}))},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=r.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){(function(e){var i=n(57),r=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);t.exports=function t(n){if(!n||"object"!=typeof n)return!1;if(i(n)){for(var r=0,a=n.length;r<a;r++)if(t(n[r]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof Blob||s&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&t(n[u]))return!0;return!1}}).call(this,n(17).Buffer)},function(t,e,n){"use strict";var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},s=0,a=0;function u(t){var e="";do{e=r[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function c(){var t=u(+new Date);return t!==i?(s=0,i=t):t+"."+u(s++)}for(;a<64;a++)o[r[a]]=a;c.encode=u,c.decode=function(t){var e=0;for(a=0;a<t.length;a++)e=64*e+o[t.charAt(a)];return e},t.exports=c},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},function(t,e,n){var i=n(15),r=n(16),o=n(68),s=n(34),a=n(35),u=n(8)("socket.io-client:socket"),c=n(9),l=n(30);t.exports=d;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=r.prototype.emit;function d(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",a(this,"onopen")),s(t,"packet",a(this,"onpacket")),s(t,"close",a(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},d.prototype.emit=function(t){if(h.hasOwnProperty(t))return p.apply(this,arguments),this;var e=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(e))?i.BINARY_EVENT:i.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},d.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},d.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},d.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===i.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},d.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},d.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=o(arguments);u("sending ack %j",r),e.packet({type:l(r)?i.BINARY_ACK:i.ACK,id:t,data:r})}}},d.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(t){return this.flags.compress=t,this},d.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CrateLinerAnimation=e.GenerateColor=e.AutomaticHidingDueInactivity=e.DivRelocatable=void 0;const i=n(3);e.DivRelocatable=class{constructor(t,e,n){this.Display=document.getElementById("display"),this.enable=!1,this.onmousemove=t=>{let e=this.X+t.movementX,n=this.Y+t.movementY;e>0&&e<this.Display.offsetWidth-this.Element.offsetWidth&&n>0&&n<this.Display.offsetHeight-this.Element.offsetHeight&&(this.X=e,this.Y=n,this.Element.style.left=this.X+"px",this.Element.style.top=this.Y+"px",localStorage[this.Element.id+"X"]=this.X,localStorage[this.Element.id+"Y"]=this.Y)},this.onmousedown=()=>{this.Element.style.cursor="grabbing",this.X=this.Element.offsetLeft,this.Y=this.Element.offsetTop,this.Element.addEventListener("mousemove",this.onmousemove)},this.onmouseleave=()=>{this.Element.style.cursor="default",this.Element.removeEventListener("mousemove",this.onmousemove)},this.onmouseup=()=>{this.Element.style.cursor="default",this.Element.removeEventListener("mousemove",this.onmousemove)},this.Element=t,this.Enable(e,n),this.ResizeObserver=new ResizeObserver(()=>{this.X>this.Display.offsetWidth-this.Element.offsetWidth&&(this.X=this.Display.offsetWidth-this.Element.offsetWidth,this.Element.style.left=this.X+"px",localStorage[this.Element.id+"X"]=this.X),this.Y>this.Display.offsetHeight-this.Element.offsetHeight&&(this.Y=this.Display.offsetHeight-this.Element.offsetHeight,this.Element.style.top=this.Y+"px",localStorage[this.Element.id+"Y"]=this.Y)}),this.ResizeObserver.observe(this.Display)}Enable(t=0,e=0){this.enable||(this.enable=!0,this.X=localStorage[this.Element.id+"X"]||t,this.Y=localStorage[this.Element.id+"Y"]||e,this.Element.style.left=this.X+"px",this.Element.style.top=this.Y+"px",this.Element.addEventListener("mousedown",this.onmousedown),this.Element.addEventListener("mouseleave",this.onmouseleave),this.Element.addEventListener("mouseup",this.onmouseup))}Disable(){this.enable=!1,this.Element.removeEventListener("mousedown",this.onmousedown),this.Element.removeEventListener("mouseleave",this.onmouseleave),this.Element.removeEventListener("mouseup",this.onmouseup)}};e.AutomaticHidingDueInactivity=class{constructor(t,e,n=500){this.Action=!0,this.Elements=e,this.WaitingTime=n,t.addEventListener("mousemove",async t=>this.show(!1)),t.addEventListener("click",async t=>this.show(!1))}async show(t,e=this.WaitingTime){this.Action&&(this.Action=!1,this.Elements.forEach(async t=>{t.classList.contains("Visible")||t.classList.add("Visible")}),await i.sleep(e),this.Action=!0,t||this.Elements.forEach(async t=>{t.classList.contains("Visible")&&t.classList.remove("Visible")}))}},e.GenerateColor=function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},e.CrateLinerAnimation=async function(t,e,n,r){let o=(e-t)/(n/16);for(let n=t;n<e;n+=o)r(n),await i.sleep(16)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Observer=void 0;const i=n(3),r=n(0);e.Observer=class{constructor(t,e=100){this.OnWatch=t=>{},this.IsStop=!1,this.watch=async()=>{setTimeout(async()=>{this.IsStop?this.PromiseToStop():(this.OnWatch(await this.Observation()),this.watch())},this.WaitingTime)},this.Observation=t,this.WaitingTime=e,this.watch()}async stop(){if(!this.IsStop)return this.IsStop=!0,new Promise((t,e)=>{this.PromiseToStop=()=>{t()}})}async start(){this.IsStop&&(this.IsStop=!1,this.OnWatch(await this.Observation().catch(async()=>(await i.sleep(1e3),r.resolve()))),this.watch())}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={StoreItem:"Store Item "}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewMain=void 0;const i=n(3),r=n(23);let o=(()=>{class t{constructor(){this.HTML_PollModule=document.getElementById("PollModule"),this.HTML_PollModuleTitle=document.getElementById("PollModuleTitle"),this.HTML_SettingModule=document.getElementById("SettingModule"),this.HTML_SettingModuleTitle=document.getElementById("SettingModuleTitle"),this.HTML_StoreModule=document.getElementById("StoreModule"),this.HTML_StoreModuleTitle=document.getElementById("StoreModuleTitle"),this.HTML_WalletsModule=document.getElementById("WalletsModule"),this.HTML_WalletsModuleTitle=document.getElementById("WalletsModuleTitle"),this.initializeModule(this.HTML_PollModuleTitle,this.HTML_PollModule),this.initializeModule(this.HTML_SettingModuleTitle,this.HTML_SettingModule),this.initializeModule(this.HTML_StoreModuleTitle,this.HTML_StoreModule),this.initializeModule(this.HTML_WalletsModuleTitle,this.HTML_WalletsModule),new r.ViewAdvertisement}async setModuleHide(t,e=500){t.classList.remove("ModuleSample"),t.classList.add("ModuleHide"),localStorage.setItem(t.id,"0"),await i.sleep(e),t.style.display="none"}async setModuleSample(t,e=100){t.style.display="",await i.sleep(e),t.classList.remove("ModuleHide"),t.classList.add("ModuleSample"),localStorage.setItem(t.id,"1")}ModuleIsHide(t){let e=localStorage.getItem(t.id);return!e||"0"===e}initializeModule(t,e){this.ModuleIsHide(e)?this.setModuleHide(e,0):this.setModuleSample(e,0),t.onclick=()=>{this.ModuleIsHide(e)?this.setModuleSample(e):this.setModuleHide(e)}}static Hide(){this.HTML.classList.add("MainDivHidden")}static Show(){this.HTML.classList.remove("MainDivHidden")}}return t.HTML=document.getElementById("MainDiv"),t})();e.ViewMain=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DeleteStoreItem=e.updateStoreItem=e.GetStore=void 0;const i=n(4),r=n(0),o=n(88),s=n(1);e.GetStore=async function(t,e=-1){return fetch(s.default.URL+i.getStoreRoute(t,e),{method:"GET"}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.updateStoreItem=async function(t,e){let n=new Headers;return n.append("Content-Type","application/json"),fetch(s.default.URL+i.StoreManagerRoute,{method:"POST",headers:n,body:JSON.stringify(new o.default(t,e))}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.DeleteStoreItem=async function(t,e){let n=new Headers;return n.append("Content-Type","application/json"),fetch(s.default.URL+i.StoreManagerRoute,{method:"DELETE",headers:n,body:JSON.stringify(new o.default(t,e))}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))}},function(t,e,n){var i=n(42),r=n(15),o=n(27),s=n(8)("socket.io-client");t.exports=e=u;var a=e.managers={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r=i(t),u=r.source,c=r.id,l=r.path,h=a[c]&&l in a[c].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||h?(s("ignoring socket cache for %s",u),n=o(u,e)):(a[c]||(s("new io instance for %s",u),a[c]=o(u,e)),n=a[c]),r.query&&!e.query&&(e.query=r.query),n.socket(r.path,e)}e.protocol=r.protocol,e.connect=u,e.Manager=n(27),e.Socket=n(33)},function(t,e,n){var i=n(24),r=n(8)("socket.io-client:url");t.exports=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(r("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),r("parse %s",t),n=i(t));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(e&&e.port===n.port?"":":"+n.port),n}},function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let n;function s(...t){if(!s.enabled)return;const e=s,r=Number(new Date),o=r-(n||r);e.diff=o,e.prev=n,e.curr=r,n=r,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return n;a++;const o=i.formatters[r];if("function"==typeof o){const i=t[a];n=o.call(e,i),t.splice(a,1),a--}return n}),i.formatArgs.call(e,t);(e.log||i.log).apply(e,t)}return s.namespace=t,s.enabled=i.enabled(t),s.useColors=i.useColors(),s.color=e(t),s.destroy=r,s.extend=o,"function"==typeof i.init&&i.init(s),i.instances.push(s),s}function r(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function o(t,e){const n=i(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},i.disable=function(){const t=[...i.names.map(s),...i.skips.map(s).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let e;i.save(t),i.names=[],i.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){const t=i.instances[e];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=n(44),Object.keys(t).forEach(e=>{i[e]=t[e]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},function(t,e){var n=1e3,i=6e4,r=60*i,o=24*r;function s(t,e,n,i){var r=e>=1.5*n;return Math.round(t/n)+" "+i+(r?"s":"")}t.exports=function(t,e){e=e||{};var a=typeof t;if("string"===a&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===a&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return s(t,e,o,"day");if(e>=r)return s(t,e,r,"hour");if(e>=i)return s(t,e,i,"minute");if(e>=n)return s(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=i)return Math.round(t/i)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){(function(i){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(e=t.exports=n(46)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))})),t.splice(o,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())}).call(this,n(5))},function(t,e,n){function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,o=r-(n||r);t.diff=o,t.prev=n,t.curr=r,n=r;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;u++;var r=e.formatters[i];if("function"==typeof r){var o=s[u];n=r.call(t,o),s.splice(u,1),u--}return n})),e.formatArgs.call(t,s);var c=i.log||e.log||console.log.bind(console);c.apply(t,s)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(47),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){var n=1e3,i=6e4,r=60*i,o=24*r;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var a,u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?s(a=t,o,"day")||s(a,r,"hour")||s(a,i,"minute")||s(a,n,"second")||a+" ms":function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=r)return Math.round(t/r)+"h";if(t>=i)return Math.round(t/i)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){var i=n(25),r=n(26),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=function t(e,n){if(!e)return e;if(r(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(i(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a],n);return s}if("object"==typeof e&&!(e instanceof Date)){s={};for(var u in e)s[u]=t(e[u],n);return s}return e}(n,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(i(e))for(var r=0;r<e.length;r++)e[r]=t(e[r],n);else if("object"==typeof e)for(var o in e)e[o]=t(e[o],n);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,o=t;!function t(u,c,l){if(!u)return u;if(s&&u instanceof Blob||a&&u instanceof File){n++;var h=new FileReader;h.onload=function(){l?l[c]=this.result:o=this.result,--n||e(o)},h.readAsArrayBuffer(u)}else if(i(u))for(var p=0;p<u.length;p++)t(u[p],p,u);else if("object"==typeof u&&!r(u))for(var d in u)t(u[d],d,u)}(o),n||e(o)}},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,i=c(t),s=i[0],a=i[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),l=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?r-1:0,p=n?-1:1,d=t[e+h];for(h+=p,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=i;l>0;s=256*s+t[e+h],h+=p,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=c}return(d?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,c=8*o-r-1,l=(1<<c)-1,h=l>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=f,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[n+d]=255&s,d+=f,s/=256,c-=8);t[n+d-f]|=128*m}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(53),t.exports.parser=n(6)},function(t,e,n){var i=n(28),r=n(20),o=n(11)("engine.io-client:socket"),s=n(32),a=n(6),u=n(24),c=n(9);function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=u(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=u(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=l,l.priorWebsocketSuccess=!1,r(l.prototype),l.protocol=a.protocol,l.Socket=l,l.Transport=n(19),l.transports=n(28),l.parser=n(6),l.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=a.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new i[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},l.prototype.probe=function(t){o('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,i=this;function r(){if(i.onlyBinaryUpgrades){var r=!this.supportsBinary&&i.transport.supportsBinary;n=n||r}n||(o('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(r){if(!n)if("pong"===r.type&&"probe"===r.data){if(o('probe transport "%s" pong',t),i.upgrading=!0,i.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,o('pausing current transport "%s"',i.transport.name),i.transport.pause((function(){n||"closed"!==i.readyState&&(o("changing transport and sending upgrade packet"),p(),i.setTransport(e),e.send([{type:"upgrade"}]),i.emit("upgrade",e),e=null,i.upgrading=!1,i.flush())}))}else{o('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=e.name,i.emit("upgradeError",s)}})))}function s(){n||(n=!0,p(),e.close(),e=null)}function a(n){var r=new Error("probe error: "+n);r.transport=e.name,s(),o('probe transport "%s" failed because of error: %s',t,n),i.emit("upgradeError",r)}function u(){a("transport closed")}function c(){a("socket closed")}function h(t){e&&t.name!==e.name&&(o('"%s" works - aborting "%s"',t.name,e.name),s())}function p(){e.removeListener("open",r),e.removeListener("error",a),e.removeListener("close",u),i.removeListener("close",c),i.removeListener("upgrading",h)}l.priorWebsocketSuccess=!1,e.once("open",r),e.once("error",a),e.once("close",u),this.once("close",c),this.once("upgrading",h),e.open()},l.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},l.prototype.sendPacket=function(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():e()})):this.upgrading?i():e()}function e(){t.onClose("forced close"),o("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function i(){t.once("upgrade",n),t.once("upgradeError",n)}return this},l.prototype.onError=function(t){o("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(t){for(var e=[],n=0,i=t.length;n<i;n++)~s(this.transports,t[n])&&e.push(t[n]);return e}},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,n){var i=n(18),r=n(29),o=n(20),s=n(10),a=n(11)("engine.io-client:polling-xhr");function u(){}function c(t){if(r.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}function l(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(t.exports=c,t.exports.Request=l,s(c,r),c.prototype.supportsBinary=!0,c.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new l(t)},c.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,i=this.request({method:"POST",data:t,isBinary:n}),r=this;i.on("success",e),i.on("error",(function(t){r.onError("xhr post error",t)})),this.sendXhr=i},c.prototype.doPoll=function(){a("xhr poll");var t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},o(l.prototype),l.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new i(t),n=this;try{a("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof e.status?e.status:0)}),0))},a("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((function(){n.onError(t)}),0)}"undefined"!=typeof document&&(this.index=l.requestsCount++,l.requests[this.index]=this)},l.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},l.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},l.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},l.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete l.requests[this.index],this.xhr=null}},l.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},l.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},l.prototype.abort=function(){this.cleanup()},l.requestsCount=0,l.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",p);else if("function"==typeof addEventListener){var h="onpagehide"in self?"pagehide":"unload";addEventListener(h,p,!1)}function p(){for(var t in l.requests)l.requests.hasOwnProperty(t)&&l.requests[t].abort()}},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var i in t)n.call(t,i)&&e.push(i);return e}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=function(t,e,n){var i=t.byteLength;if(e=e||0,n=n||i,t.slice)return t.slice(e,n);if(e<0&&(e+=i),n<0&&(n+=i),n>i&&(n=i),e>=i||e>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=r[s];return o.buffer}},function(t,e){function n(){}t.exports=function(t,e,i){var r=!1;return i=i||n,o.count=t,0===t?e():o;function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(r=!0,e(t),e=i):0!==o.count||r||e(null,n)}}},function(t,e){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var n,i,r,o=String.fromCharCode;function s(t){for(var e,n,i=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}function a(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(t,e){return o(t>>e&63|128)}function c(t,e){if(0==(4294967168&t))return o(t);var n="";return 0==(4294965248&t)?n=o(t>>6&31|192):0==(4294901760&t)?(a(t,e)||(t=65533),n=o(t>>12&15|224),n+=u(t,6)):0==(4292870144&t)&&(n=o(t>>18&7|240),n+=u(t,12),n+=u(t,6)),n+=o(63&t|128)}function l(){if(r>=i)throw Error("Invalid byte index");var t=255&n[r];if(r++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function h(t){var e,o;if(r>i)throw Error("Invalid byte index");if(r==i)return!1;if(e=255&n[r],r++,0==(128&e))return e;if(192==(224&e)){if((o=(31&e)<<6|l())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if((o=(15&e)<<12|l()<<6|l())>=2048)return a(o,t)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(o=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,i=s(t),r=i.length,o=-1,a="";++o<r;)a+=c(i[o],n);return a},decode:function(t,e){var a=!1!==(e=e||{}).strict;n=s(t),i=n.length,r=0;for(var u,c=[];!1!==(u=h(a));)c.push(u);return function(t){for(var e,n=t.length,i=-1,r="";++i<n;)(e=t[i])>65535&&(r+=o((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+=o(e);return r}(c)}}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<t.length;i++)n[t.charCodeAt(i)]=i;e.encode=function(e){var n,i=new Uint8Array(e),r=i.length,o="";for(n=0;n<r;n+=3)o+=t[i[n]>>2],o+=t[(3&i[n])<<4|i[n+1]>>4],o+=t[(15&i[n+1])<<2|i[n+2]>>6],o+=t[63&i[n+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,i,r,o,s,a=.75*t.length,u=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),h=new Uint8Array(l);for(e=0;e<u;e+=4)i=n[t.charCodeAt(e)],r=n[t.charCodeAt(e+1)],o=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],h[c++]=i<<2|r>>4,h[c++]=(15&r)<<4|o>>2,h[c++]=(3&o)<<6|63&s;return l}}()},function(t,e){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),r=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function s(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function a(t,e){e=e||{};var i=new n;return s(t).forEach((function(t){i.append(t)})),e.type?i.getBlob(e.type):i.getBlob()}function u(t,e){return new Blob(s(t),e||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,u.prototype=Blob.prototype),t.exports=i?r?Blob:u:o?a:void 0},function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){let n;function s(...t){if(!s.enabled)return;const e=s,r=Number(new Date),o=r-(n||r);e.diff=o,e.prev=n,e.curr=r,n=r,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return n;a++;const o=i.formatters[r];if("function"==typeof o){const i=t[a];n=o.call(e,i),t.splice(a,1),a--}return n}),i.formatArgs.call(e,t);(e.log||i.log).apply(e,t)}return s.namespace=t,s.enabled=i.enabled(t),s.useColors=i.useColors(),s.color=e(t),s.destroy=r,s.extend=o,"function"==typeof i.init&&i.init(s),i.instances.push(s),s}function r(){const t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function o(t,e){const n=i(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},i.disable=function(){const t=[...i.names.map(s),...i.skips.map(s).map(t=>"-"+t)].join(",");return i.enable(""),t},i.enable=function(t){let e;i.save(t),i.names=[],i.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){const t=i.instances[e];t.enabled=i.enabled(t.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,n;for(e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=n(64),Object.keys(t).forEach(e=>{i[e]=t[e]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},function(t,e){var n=1e3,i=6e4,r=60*i,o=24*r;function s(t,e,n,i){var r=e>=1.5*n;return Math.round(t/n)+" "+i+(r?"s":"")}t.exports=function(t,e){e=e||{};var a=typeof t;if("string"===a&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===a&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return s(t,e,o,"day");if(e>=r)return s(t,e,r,"hour");if(e>=i)return s(t,e,i,"minute");if(e>=n)return s(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=i)return Math.round(t/i)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){(function(e){var i=n(29),r=n(10);t.exports=l;var o,s=/\n/g,a=/\\n/g;function u(){}function c(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{}}function l(t){if(i.call(this,t),this.query=this.query||{},!o){var e=c();o=e.___eio=e.___eio||[]}this.index=o.length;var n=this;o.push((function(t){n.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=u)}),!1)}r(l,i),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},l.prototype.doWrite=function(t,e){var n=this;if(!this.form){var i,r=document.createElement("form"),o=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=u,r.method="POST",r.setAttribute("accept-charset","utf-8"),o.name="d",r.appendChild(o),document.body.appendChild(r),this.form=r,this.area=o}function c(){l(),e()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(t)}catch(t){(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),l(),t=t.replace(a,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,n(7))},function(t,e,n){(function(e){var i,r,o=n(19),s=n(6),a=n(9),u=n(10),c=n(31),l=n(11)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{r=n(67)}catch(t){}var h=i||r;function p(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=i&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(h=r),o.call(this,t)}t.exports=p,u(p,o),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new h(t,e):new h(t):new h(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},p.prototype.write=function(t){var n=this;this.writable=!1;for(var i=t.length,r=0,o=i;r<o;r++)!function(t){s.encodePacket(t,n.supportsBinary,(function(r){if(!n.usingBrowserWebSocket){var o={};if(t.options&&(o.compress=t.options.compress),n.perMessageDeflate)("string"==typeof r?e.byteLength(r):r.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(r):n.ws.send(r,o)}catch(t){l("websocket closed before onclose event")}--i||a()}))}(t[r]);function a(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},p.prototype.onClose=function(){o.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},p.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===p.prototype.name)}}).call(this,n(17).Buffer)},function(t,e){},function(t,e){t.exports=function(t,e){for(var n=[],i=(e=e||0)||0;i<t.length;i++)n[i-e]=t[i];return n}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(2),r=n(71),o=n(12),s=n(13),a=n(73),u=n(76),c=n(77),l=n(37);e.default=class{constructor(t,e){this.Token=t,this.StreamerID=e,this.LoadingCurrentPoll()}setListeners(){this.ViewPollManager.onCommandToCreateSent=async()=>(this.ViewPollManager.PollStatus=new c.PollStatus,a.PollManager(new u.PollRequest(this.Token,null,this.ViewPollManager.PollStatus)).then(async()=>{i.NotifyViewers({ListenerName:o.default.onPollChange,data:await a.getCurrentPoll(this.StreamerID)})})),this.ViewPollManager.onCommandToWaxSent=async()=>(this.ViewPollManager.PollStatus.PollWaxed=!0,a.PollManager(new u.PollRequest(this.Token,null,this.ViewPollManager.PollStatus)).then(async()=>{this.PollObserver.stop(),i.NotifyViewers({ListenerName:o.default.onPollChange,data:await a.getCurrentPoll(this.StreamerID)})})),this.ViewPollManager.onCommandToStartSent=async()=>(this.ViewPollManager.PollStatus.PollStarted=!0,a.PollManager(new u.PollRequest(this.Token,this.ViewPollManager.getPollButtons(),this.ViewPollManager.PollStatus)).then(async()=>{this.PollObserver.start(),i.NotifyViewers({ListenerName:o.default.onPollChange,data:await a.getCurrentPoll(this.StreamerID)})})),this.ViewPollManager.onCommandToApplyChangesSent=async()=>a.PollManager(new u.PollRequest(this.Token,this.ViewPollManager.getPollButtons(),this.ViewPollManager.PollStatus)).then(async()=>{i.NotifyViewers({ListenerName:o.default.onPollChange,data:await a.getCurrentPoll(this.StreamerID)})}),this.ViewPollManager.onCommandToStopSent=async()=>(this.ViewPollManager.PollStatus.PollStopped=!0,a.PollManager(new u.PollRequest(this.Token,null,this.ViewPollManager.PollStatus)).then(async()=>{this.PollObserver.stop(),i.NotifyViewers({ListenerName:o.default.onPollChange,data:await a.getCurrentPoll(this.StreamerID)})})),this.ViewPollManager.onCommandToRestartSent=async()=>(this.ViewPollManager.PollStatus.PollStopped=!1,a.PollManager(new u.PollRequest(this.Token,null,this.ViewPollManager.PollStatus)).then(async()=>{this.PollObserver.start(),i.NotifyViewers({ListenerName:o.default.onPollChange,data:await a.getCurrentPoll(this.StreamerID)})})),this.ViewPollManager.onCommandToRevertChanges=async()=>{this.ViewPollManager.updateItems(await a.getCurrentPoll(this.StreamerID))},this.ViewPollManager.onCommandToDistributeSent=async()=>{let t=async()=>{let e=await a.getCurrentPoll(this.StreamerID);this.ViewPollManager.PollStatus=e.PollStatus,this.ViewPollManager.setDistributionsFinished(),i.NotifyViewers({ListenerName:o.default.onPollChange,data:e}),i.STREAMER_SOCKET.removeEventListener(s.default.onDistributionFinish,t)};i.STREAMER_SOCKET.addEventListener(s.default.onDistributionFinish,t),this.ViewPollManager.PollStatus.DistributionStarted=!0,await a.PollManager(new u.PollRequest(this.Token,this.ViewPollManager.getPollButtons(),this.ViewPollManager.PollStatus))}}async LoadingCurrentPoll(){let t=await a.getCurrentPoll(this.StreamerID);this.ViewPollManager=new r.default(t),this.PollObserver=new l.Observer(async()=>a.getCurrentPoll(this.StreamerID),500),this.PollObserver.OnWatch=t=>{this.ViewPollManager.updateVotesOfAllItems(t)},this.ViewPollManager.onStatusChange=t=>{t.PollStarted&&!t.PollStopped?this.PollObserver.start():this.PollObserver.stop()},this.ViewPollManager.PollStatus=t.PollStatus,this.setListeners()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PollItemViewer=void 0;const i=n(72),r=n(36),o=n(2),s=n(3);class a{constructor(){let t=document.createElement("div");t.classList.add("ItemInputDiv");let e=document.createElement("h3");o.Texts.onLocaleChange=()=>{e.innerText=o.Texts.get("Name")+" |"},t.appendChild(e),this.HTMLNameInput=document.createElement("input"),this.HTMLNameInput.maxLength=13,this.HTMLNameInput.type="text",this.HTMLNameInput.onchange=()=>{this.onChange()},t.appendChild(this.HTMLNameInput),this.HTMLElement=t}getValue(){return this.HTMLNameInput.value}setValue(t){this.HTMLNameInput.value=t}}class u{constructor(){let t=document.createElement("div");t.classList.add("ItemInputDiv");let e=document.createElement("h3");o.Texts.onLocaleChange=()=>{e.innerText=o.Texts.get("Color")+" |"},t.appendChild(e),this.HTMLColorInput=document.createElement("input"),this.HTMLColorInput.type="color",this.HTMLColorInput.onchange=()=>{this.onChange()},t.appendChild(this.HTMLColorInput),this.HTMLElement=t}getValue(){return this.HTMLColorInput.value}setValue(t){this.HTMLColorInput.value=t}}class c{constructor(){let t=document.createElement("div");t.classList.add("ItemInputDiv");let e=document.createElement("h3");o.Texts.onLocaleChange=()=>{e.innerText=o.Texts.get("Betting")+" |"},t.appendChild(e),this.HTMLVoteOutput=document.createElement("h3"),this.HTMLVoteOutput.classList.add("VoteNumerator"),this.HTMLVoteOutput.innerText="0",t.appendChild(this.HTMLVoteOutput),this.HTMLElement=t}getValue(){return Number(this.HTMLVoteOutput.innerText)}setValue(t){this.HTMLVoteOutput.innerText=t.toString()}}class l{constructor(t,e){let n=document.createElement("button");n.classList.add("DeletePollItemButton"),n.onclick=function(){t.removeItem(e)},this.HTMLElement=n}}class h{constructor(){let t=document.createElement("div");t.classList.add("LayoutToChooseHidden");let e=document.createElement("div"),n=document.createElement("div");n.classList.add("DivOfChooseButton"),this.PickWinnerButton=document.createElement("button"),this.PickWinnerButton.classList.add("VoteManagementButton"),this.PickWinnerButton.classList.add("ChooseButton"),this.PickWinnerButton.value="false";let i=this;this.PickWinnerButton.onclick=()=>{i.IsSelected()?i.Unelected():i.Selected(),this.onChange()},n.appendChild(this.PickWinnerButton),e.appendChild(n),t.appendChild(n),t.appendChild(e),this.HTMLElement=t}IsSelected(){return this.PickWinnerButton.classList.contains("selected")}Selected(){this.PickWinnerButton.classList.add("selected")}Unelected(){this.PickWinnerButton.classList.remove("selected")}Show(){this.HTMLElement.classList.remove("LayoutToChooseHidden"),this.HTMLElement.classList.add("LayoutToChoose")}Hide(){this.HTMLElement.classList.remove("LayoutToChoose"),this.HTMLElement.classList.add("LayoutToChooseHidden")}}class p{constructor(t,e){this.ID=t,this.ViewPoll=e,this.HTML=document.createElement("div"),this.HTML.classList.add("PollItem");let n=document.createElement("div");n.style.display="flex",this.NameInput=new a,this.NameInput.onChange=()=>this.onChange(),this.getNameInputValue=()=>this.NameInput.getValue(),this.setNameInputValue=t=>this.NameInput.setValue(t),this.ColorInput=new u,this.ColorInput.onChange=()=>this.onChange(),this.getColorInputValue=()=>this.ColorInput.getValue(),this.setColorInputValue=t=>this.ColorInput.setValue(t),this.VoteCounterOutput=new c,this.getVoteCounterOutputValue=()=>this.VoteCounterOutput.getValue(),this.setVoteCounterOutputValue=t=>this.VoteCounterOutput.setValue(t),this.DeleteButton=new l(e,this),n.appendChild(this.NameInput.HTMLElement),n.appendChild(this.ColorInput.HTMLElement),n.appendChild(this.VoteCounterOutput.HTMLElement),n.appendChild(this.DeleteButton.HTMLElement),this.PickWinnerButton=new h,this.PickWinnerButton.onChange=()=>this.onWinnersButtonsChange(),this.setWinner=()=>this.PickWinnerButton.Selected(),this.ShowWinnerPick=()=>{this.Enable(n),this.PickWinnerButton.Show()},this.HideWinnerPick=()=>{this.Disable(n),this.PickWinnerButton.Hide()},this.IsWinner=()=>this.PickWinnerButton.IsSelected(),this.HTML.appendChild(n),this.HTML.appendChild(this.PickWinnerButton.HTMLElement),this.HTML.appendChild(n)}Enable(t){t.classList.add("PollItemInChoose"),this.NameInput.HTMLNameInput.setAttribute("disabled","disabled"),this.ColorInput.HTMLColorInput.setAttribute("disabled","disabled"),this.DeleteButton.HTMLElement.setAttribute("disabled","disabled")}Disable(t){t.classList.remove("PollItemInChoose"),this.NameInput.HTMLNameInput.removeAttribute("disabled"),this.ColorInput.HTMLColorInput.removeAttribute("disabled"),this.DeleteButton.HTMLElement.removeAttribute("disabled")}}e.PollItemViewer=p;e.default=class{constructor(t){this.PollItemsViewers=[],this.DistributionDiv=document.getElementById("DistributionDiv"),this.DistributionText=document.getElementById("DistributionText"),this.PollManagerDiv=document.getElementById("PollManagerDiv"),this.PollItemsDiv=document.getElementById("PollItemsDiv"),this.CreatePollButton=document.getElementById("CreatePollButton"),this.DeletePollButton=document.getElementById("DeletePollButton"),this.AddItemButton=document.getElementById("AddPollItemButton"),this.StartPollButton=document.getElementById("StartPollButton"),this.ApplyChangesButton=document.getElementById("ApplyChangesButton"),this.RevertChangesButton=document.getElementById("RevertChangesButton"),this.StopPollButton=document.getElementById("StopPollButton"),this.RestartButton=document.getElementById("RestartButton"),this.DistributeButton=document.getElementById("DistributeButton"),this.CloseButton=document.getElementById("CloseButton"),this.onStatusChange=t=>{},this.onClickOfCreatePollButton=()=>(this.DisableButton(this.CreatePollButton),this.onCommandToCreateSent().then(t=>{this.setCreatedPoll()}).catch(t=>{console.error(t)}),!0),this.onClickOfWaxedPollButton=()=>(this.DisableButton(this.DeletePollButton),this.onCommandToWaxSent().then(t=>{this.setWaxedPoll()}),!0),this.onClickOfAddItemButton=()=>{let t=0,e=this.PollItemsViewers[this.PollItemsViewers.length-1];return void 0!==e&&(t=e.ID,t++),this.addItem(t,null,r.GenerateColor(),!1),this.onPollItemModified(),!0},this.onClickOfStartButton=()=>(this.onCommandToStartSent().then(t=>{this.setStartedPoll()}),!0),this.onClickOfApplyChangesButton=()=>(this.DisableButton(this.ApplyChangesButton),this.onCommandToApplyChangesSent().then(t=>{this.HideButton(this.ApplyChangesButton),this.HideButton(this.RevertChangesButton)}),!0),this.onClickOfRevertChangesButton=async()=>(this.DisableButton(this.ApplyChangesButton),await this.onCommandToRevertChanges(),this.HideButton(this.ApplyChangesButton),this.HideButton(this.RevertChangesButton),this.EnableButton(this.StopPollButton,this.onClickOfStopPollButton),!0),this.onClickOfStopPollButton=()=>(this.onCommandToStopSent().then(t=>{this.setStoppedPoll()}),!0),this.onClickOfRestartButton=()=>(this.onCommandToRestartSent().then(t=>{this.setRestartedPoll()}),!0),this.onClickOfDistributeButton=()=>(this.onCommandToDistributeSent().then(t=>{this.setInDistribution()}),!0),this.onClickOfCloseButton=()=>(this.onCommandToWaxSent().then(t=>{this.setWaxedPoll()}),!0),this.onPollItemModified=()=>{this.pollStatus.PollStarted&&(this.ShowButton(this.ApplyChangesButton),this.ShowButton(this.RevertChangesButton)),this.EnableButton(this.RevertChangesButton,this.onClickOfRevertChangesButton),this.ThereAreEnoughElements()?(this.EnableButton(this.ApplyChangesButton,this.onClickOfApplyChangesButton),this.EnableButton(this.StartPollButton,this.onClickOfStartButton),this.EnableButton(this.StopPollButton,this.onClickOfStopPollButton)):(this.DisableButton(this.ApplyChangesButton),this.DisableButton(this.StartPollButton),this.DisableButton(this.StopPollButton))},this.onWinnerButtonsModified=()=>(this.ThereAreSelectedWinners?this.EnableButton(this.DistributeButton,this.onClickOfDistributeButton):this.DisableButton(this.DistributeButton),!0),this.InitializeButtons(),t.PollStatus.PollWaxed?this.setWaxedPoll():(this.setCreatedPoll(),t.PollStatus.PollStarted&&(this.setStartedPoll(),this.updateItems(t)),t.PollStatus.PollStopped&&this.setStoppedPoll(),t.PollStatus.DistributionStarted&&this.setInDistribution(),t.PollStatus.DistributionCompleted&&this.setDistributionsFinished())}get PollStatus(){return this.pollStatus}set PollStatus(t){this.pollStatus=t,this.onStatusChange(t)}get ThereAreSelectedWinners(){for(const t in this.PollItemsViewers)if(this.PollItemsViewers[t].IsWinner())return!0;return!1}setCreatedPoll(){this.ShowPoll(),this.EnableButton(this.AddItemButton,this.onClickOfAddItemButton),this.ShowButton(this.DeletePollButton),this.EnableButton(this.DeletePollButton,this.onClickOfWaxedPollButton)}setWaxedPoll(){this.HidePoll(),this.HideDistributionDiv(),this.HideButton(this.RestartButton),this.HideButton(this.StopPollButton),this.HideButton(this.DistributeButton),this.HideButton(this.DeletePollButton),this.removeAllItems(),this.ShowButton(this.CreatePollButton),this.EnableButton(this.CreatePollButton,this.onClickOfCreatePollButton)}setStartedPoll(){this.ShowButton(this.StopPollButton),this.HideButton(this.StartPollButton)}setStoppedPoll(){this.ShowWinnersPicks(),this.HideButton(this.StopPollButton),this.ShowButton(this.DistributeButton),this.ThereAreSelectedWinners&&this.EnableButton(this.DistributeButton,this.onClickOfDistributeButton),this.ShowButton(this.RestartButton),this.EnableButton(this.RestartButton,this.onClickOfRestartButton),this.DisableButton(this.AddItemButton)}setRestartedPoll(){this.HideWinnersPicks(),this.ShowButton(this.StopPollButton),this.HideButton(this.DistributeButton),this.HideButton(this.RestartButton),this.EnableButton(this.StopPollButton,this.onClickOfStopPollButton),this.EnableButton(this.AddItemButton,this.onClickOfAddItemButton)}setInDistribution(){this.ShowDistributionDiv(),this.ShowButton(this.CloseButton),this.EnableButton(this.CloseButton,this.onClickOfCloseButton),this.DistributionDiv.classList.remove("DistributionsFinished"),o.Texts.onLocaleChange=()=>{this.DistributionText.innerText=o.Texts.get("DistributionText")}}async setDistributionsFinished(){await s.sleep(500),this.DistributionDiv.classList.add("DistributionsFinished"),o.Texts.onLocaleChange=()=>{this.DistributionText.innerText=o.Texts.get("DistributionsFinishedText")}}InitializeButtons(){this.CreatePollButton.onclick=this.onClickOfCreatePollButton,this.DeletePollButton.onclick=this.onClickOfWaxedPollButton}ThereAreEnoughElements(){return this.PollItemsViewers.length>1}ShowPoll(){this.PollManagerDiv.classList.remove("Hidden"),this.HideButton(this.CreatePollButton),this.ShowButton(this.StartPollButton),this.HideDistributionDiv()}HidePoll(){this.PollManagerDiv.classList.add("Hidden")}ShowDistributionDiv(){this.DistributionDiv.classList.remove("Hidden"),this.HidePoll()}HideDistributionDiv(){this.DistributionDiv.classList.add("Hidden")}ShowButton(t){t.classList.remove("ButtonHide"),t.classList.remove("ButtonEnable"),t.classList.add("ButtonDisable"),t.onclick=null}HideButton(t){t.classList.remove("ButtonDisable"),t.classList.remove("ButtonEnable"),t.classList.add("ButtonHide"),t.onclick=null}EnableButton(t,e){t.classList.remove("ButtonDisable"),t.classList.add("ButtonEnable"),t.onclick=e}DisableButton(t){t.classList.remove("ButtonEnable"),t.classList.add("ButtonDisable"),t.onclick=null}ButtonIsEnable(t){return t.classList.contains("ButtonEnable")}ShowWinnersPicks(){this.PollItemsViewers.forEach(t=>{t.ShowWinnerPick()})}HideWinnersPicks(){this.PollItemsViewers.forEach(t=>{t.HideWinnerPick()})}getPollButtons(){let t=[];return this.PollItemsViewers.forEach(e=>{t.push(new i.PollButton(e.ID,e.getNameInputValue(),e.getColorInputValue(),e.IsWinner()))}),t}addItem(t,e,n,i){let r=new p(t,this);return r.setNameInputValue(e),r.setColorInputValue(n),i&&r.setWinner(),r.onChange=this.onPollItemModified,r.onWinnersButtonsChange=this.onWinnerButtonsModified,this.PollItemsViewers.push(r),this.PollItemsDiv.appendChild(r.HTML),r}removeItem(t){this.pollStatus.PollStopped||(this.PollItemsViewers.splice(this.PollItemsViewers.indexOf(t),1),this.PollItemsDiv.removeChild(t.HTML),this.onPollItemModified())}updateVotesOfAllItems(t){t.Bets.length>0&&!this.ButtonIsEnable(this.StopPollButton)&&this.EnableButton(this.StopPollButton,this.onClickOfStopPollButton),this.PollItemsViewers.forEach(e=>{e.setVoteCounterOutputValue(0),t.Bets.forEach(t=>{t&&t.BetID===e.ID&&e.setVoteCounterOutputValue(t.NumberOfBets)})})}updateItems(t){this.removeAllItems(),t.PollButtons.forEach(t=>{this.addItem(t.ID,t.Name,t.Color,t.IsWinner)}),this.updateVotesOfAllItems(t)}removeAllItems(){this.PollItemsDiv.innerHTML="",this.PollItemsViewers=[]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PollButton=void 0;e.PollButton=class{constructor(t,e,n,i){this.ID=t,this.Name=e,this.Color=n,this.IsWinner=i}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PollManager=e.addBet=e.getCurrentPoll=void 0;const i=n(4),r=n(0),o=n(1);e.getCurrentPoll=async function(t){return fetch(o.default.URL+i.getPollRoute(t),{method:"GET"}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.addBet=async function(t){let e=new Headers;return e.append("Content-Type","application/json"),fetch(o.default.URL+i.AddBetRoute,{method:"POST",headers:e,body:JSON.stringify(t)}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.PollManager=async function(t){let e=new Headers;return e.append("Content-Type","application/json"),fetch(o.default.URL+i.PollManagerRoute,{method:"POST",headers:e,body:JSON.stringify(t)}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))}},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(75),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(7))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,s,a,u=1,c={},l=!1,h=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},i=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(f,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&f(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,i(u),u++},p.clearImmediate=d}function d(t){delete c[t]}function f(t){if(l)setTimeout(f,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(7),n(5))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PollRequest=void 0;e.PollRequest=class{constructor(t,e,n){this.Token=t,this.PollButtons=e,this.NewPollStatus=n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PollStatus=void 0;e.PollStatus=class{constructor(t){t?(this.id=t.id,this.PollWaxed=t.PollWaxed,this.PollStarted=t.PollStarted,this.PollStopped=t.PollStopped,this.InDistribution=t.InDistribution,this.DistributionStarted=t.DistributionStarted,this.DistributionCompleted=t.DistributionCompleted,this.DistributionStatisticsJson=t.DistributionStatisticsJson,this.updatedAt=t.updatedAt):(this.id=void 0,this.PollWaxed=!1,this.PollStarted=!1,this.PollStopped=!1,this.InDistribution=!1,this.DistributionStarted=!1,this.DistributionCompleted=!1,this.DistributionStatisticsJson=void 0,this.updatedAt=void 0)}start(){return this.PollStarted=!0,this}stop(){return this.PollStopped=!0,this}restart(){return this.PollStopped=!1,this}startDistribution(){return this.DistributionStarted=!0,this}setInDistribution(){return this.InDistribution=!0,this}setDistributionAsCompleted(){return this.DistributionCompleted=!0,this}wax(){return this.PollWaxed=!0,this}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(79),r=n(3),o=n(80),s=n(2),a=n(12),u=n(81),c=n(82),l=n(83),h=n(84),p=n(14);e.default=class{constructor(t,e){this.ViewSettings=new o.default,this.Token=t,this.StreamerID=e,this.LoadingSettings()}setListeners(){this.ViewSettings.HourlyRewardInput.HTML.onchange=()=>{this.ViewSettings.HourlyRewardInput.setChangedInput(),u.ManagerMiner(new c.MinerManagerRequest(this.Token,new i.MinerSettings(Number(this.ViewSettings.HourlyRewardInput.HTML.value)/60))).then(async()=>{this.ViewSettings.HourlyRewardInput.setInputSuccessfully(),await r.sleep(100),this.ViewSettings.HourlyRewardInput.setUnchangedInput()}).catch(()=>{this.ViewSettings.HourlyRewardInput.setInputError()})},this.ViewSettings.CoinNameInput.HTML.onchange=async()=>{this.ViewSettings.CoinNameInput.setChangedInput(),this.CoinsSettings.CoinName=this.ViewSettings.CoinNameInput.HTML.value,l.ManagerCoinsSettings(new h.CoinsSettingsManagerRequest(this.Token,this.CoinsSettings)).then(async()=>{this.ViewSettings.CoinNameInput.setInputSuccessfully(),await r.sleep(100),this.ViewSettings.CoinNameInput.setUnchangedInput(),s.NotifyViewers({ListenerName:a.default.onCoinNameChange,data:this.CoinsSettings.CoinName})}).catch(()=>{this.ViewSettings.CoinNameInput.setInputError()})},this.ViewSettings.InputCoinImg.onchange=()=>{let t=this.ViewSettings.InputCoinImg.files[0];t&&p.UploadFile(this.Token,"CoinImage",t.name,t).then(async e=>{this.CoinsSettings.FileNameOfCoinImage=t.name,l.ManagerCoinsSettings(new h.CoinsSettingsManagerRequest(this.Token,this.CoinsSettings)),this.ViewSettings.setCoinIMG(p.getUrlOfFile(this.StreamerID,"CoinImage",this.CoinsSettings.FileNameOfCoinImage))}).catch(t=>console.error(t))}}async LoadingSettings(){this.MinerSettings=await u.GetMinerSettings(this.StreamerID),this.CoinsSettings=await l.GetCoinsSettings(this.StreamerID),this.ViewSettings.HourlyRewardInput.HTML.value=(~~(60*this.MinerSettings.RewardPerMinute)).toString(),this.ViewSettings.CoinNameInput.HTML.value=this.CoinsSettings.CoinName,this.CoinsSettings.FileNameOfCoinImage&&this.ViewSettings.setCoinIMG(p.getUrlOfFile(this.StreamerID,"CoinImage",this.CoinsSettings.FileNameOfCoinImage)),this.setListeners()}}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.MinerSettings=e.MINIMUM_TIME_FOR_MINING=void 0,e.MINIMUM_TIME_FOR_MINING=t.env.MINIMUM_TIME_FOR_MINING?Number(t.env.MINIMUM_TIME_FOR_MINING):1e3;e.MinerSettings=class{constructor(t){this.RewardPerMining=t/(e.MINIMUM_TIME_FOR_MINING/1e3)/60,this.RewardPerMinute=t}}}).call(this,n(5))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(21);e.default=class{constructor(){this.LabeForInputCoinImg=document.getElementById("LabeForInputCoinImg"),this.HourlyRewardInput=new i.ResponsiveInput(document.getElementById("HourlyRewardInput")),this.CoinNameInput=new i.ResponsiveInput(document.getElementById("CoinNameInput")),this.InputCoinImg=document.getElementById("InputCoinImg")}setCoinIMG(t){this.LabeForInputCoinImg.style.backgroundImage="url("+t+")"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MineCoin=e.GetMinerSettings=e.ManagerMiner=void 0;const i=n(4),r=n(0),o=n(1);e.ManagerMiner=async function(t){let e=new Headers;return e.append("Content-Type","application/json"),fetch(o.default.URL+i.MinerManagerRoute,{method:"POST",headers:e,body:JSON.stringify(t)}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.GetMinerSettings=async function(t){return fetch(o.default.URL+i.getMinerSettingsRoute(t),{method:"GET"}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.MineCoin=async function(t){let e=new Headers;return e.append("Content-Type","application/json"),fetch(o.default.URL+i.MineCoinRoute,{method:"POST",headers:e,body:JSON.stringify(t)}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MinerManagerRequest=void 0;e.MinerManagerRequest=class{constructor(t,e){this.Token=t,this.Setting=e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ManagerCoinsSettings=e.GetCoinsSettings=void 0;const i=n(4),r=n(0),o=n(1);e.GetCoinsSettings=async function(t){return fetch(o.default.URL+i.getCoinsSettingsRoute(t),{method:"GET"}).then(t=>t.ok?t.json():r.reject(t))},e.ManagerCoinsSettings=async function(t){let e=new Headers;return e.append("Content-Type","application/json"),fetch(o.default.URL+i.CoinsSettingsManagerRoute,{method:"POST",headers:e,body:JSON.stringify(t)}).then(t=>t.ok?t.json():r.reject(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoinsSettingsManagerRequest=void 0;e.CoinsSettingsManagerRequest=class{constructor(t,e){this.Token=t,this.Setting=e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(22),r=n(86),o=n(87),s=n(12),a=n(2),u=n(38),c=n(23),l=n(13),h=n(40),p=n(14),d=n(3);e.default=class{constructor(t,e){this.ViewStore=new r.default,this.Token=t,this.StreamerID=e,this.loadingStoreItems()}onStoreChange(){a.NotifyViewers({ListenerName:s.default.onStoreChange,data:void 0})}async setListeners(){this.ViewStore.onAddStoreItemSoundActive=async()=>{await h.updateStoreItem(this.Token,this.ViewStore.addViewStoreItem(new i.default(null,i.StoreTypes.Audio,null,[new o.default("SingleReproduction",!1),new o.default("AudioVolume",!1,100)],null,null)))},this.ViewStore.onStoreTypeActive=async(t,e)=>{t.FileName&&(this.ViewStore.ViewStoreItems.forEach(e=>{e!==t&&e.ViewStoreType.setHide()}),e.InDemo?(e.setHide(),this.ViewStore.HTML_DemoAudioPlayer.pause()):(e.setInDemo(),this.ViewStore.HTML_DemoAudioPlayer.src=p.getUrlOfFile(this.StreamerID,u.default.StoreItem+t.id,t.FileName),this.ViewStore.HTML_DemoAudioPlayer.volume=i.getItemsSetting("AudioVolume",t.ItemsSettings).value/100,this.ViewStore.HTML_DemoAudioPlayer.play()))},this.ViewStore.onDescriptionChange=t=>{t.DescriptionInput.setChangedInput(),h.updateStoreItem(this.Token,t).then(async()=>{t.DescriptionInput.setInputSuccessfully(),await d.sleep(500),t.DescriptionInput.setUnchangedInput(),this.onStoreChange()}).catch(e=>{console.error(e),t.DescriptionInput.setInputError()})},this.ViewStore.onPriceChange=t=>{t.PriceInput.setChangedInput(),h.updateStoreItem(this.Token,t).then(async()=>{t.PriceInput.setInputSuccessfully(),await d.sleep(500),t.PriceInput.setUnchangedInput(),this.onStoreChange()}).catch(e=>{console.error(e),t.PriceInput.setInputError()})},this.ViewStore.onSettingOfItemChange=(t,e)=>{"AudioVolume"===e.DonorFeatureName&&(this.ViewStore.HTML_DemoAudioPlayer.volume=e.value/100,this.ViewStore.HTML_DemoAudioPlayer.currentTime=0),h.updateStoreItem(this.Token,t).then(()=>this.onStoreChange()).catch(n=>{"SingleReproduction"===e.DonorFeatureName&&(t.SingleReproductionSetting.HTML_Input.checked=!1,e.Enable=!1,423===n.status&&c.ViewAdvertisement.Show())})},this.ViewStore.onFileInputChange=async t=>{let e=t.ResponsiveInputFile.HTML_InputFile.files[0];if(e){switch(t.Type){case i.StoreTypes.Audio:if("audio/mp3"!==e.type&&"audio/wav"!==e.type&&"audio/mpeg"!==e.type)throw{typeError:e.type}}t.ResponsiveInputFile.setInUpload(),t.ResponsiveInputFile.setUploadPercentage(0);let n=e=>{t.ResponsiveInputFile.setUploadPercentage(e)};a.STREAMER_SOCKET.addEventListener(l.default.UploadProgress,n),p.UploadFile(this.Token,u.default.StoreItem+t.id,e.name,e).then(async e=>{let i=t;i.FileName=e.FileName,await h.updateStoreItem(this.Token,i),t.ResponsiveInputFile.setUpgradeable(),a.STREAMER_SOCKET.removeEventListener(l.default.UploadProgress,n),this.onStoreChange()}).catch(t=>console.error(t))}},this.ViewStore.onButtonDeleteActive=async t=>{h.DeleteStoreItem(this.Token,t).then(()=>{this.onStoreChange(),this.ViewStore.removeStoreItem(t)}).catch(t=>{console.error(t)})}}async loadingStoreItems(){this.StoreItems=await h.GetStore(this.StreamerID),this.StoreItems.forEach(t=>{this.ViewStore.addViewStoreItem(t)}),this.setListeners()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewStoreItem=void 0;const i=n(22),r=n(21),o=n(2);class s{constructor(t){this.ItemSettings=t,this.HTML=document.createElement("label"),this.HTML.classList.add("switch"),this.HTML_Input=document.createElement("input"),this.HTML_Input.checked=this.ItemSettings.Enable,this.HTML_Input.type="checkbox",this.HTML.appendChild(this.HTML_Input),this.HTML_span=document.createElement("span"),this.HTML_span.classList.add("slider"),this.HTML_span.classList.add("round"),o.Texts.onLocaleChange=()=>this.HTML_span.title=o.Texts.get("SingleReproductionDescription"),this.HTML.appendChild(this.HTML_span)}}class a{constructor(t,e){switch(this.HTML=document.createElement("div"),this.HTML.classList.add("StoreTypeDiv"),this.AudioVolumeDiv=document.createElement("div"),this.AudioVolumeDiv.classList.add("AudioVolumeDiv"),this.AudioVolumeDiv.classList.add("AudioVolumeDivHide"),this.HTML_InputAudioVolume=document.createElement("input"),this.HTML_InputAudioVolume.type="range",this.HTML_InputAudioVolume.value=e.value,this.AudioVolumeDiv.appendChild(this.HTML_InputAudioVolume),this.Image=document.createElement("div"),this.Image.classList.add("TypeDisplayIMG"),this.HTML.classList.add("TypeDisplay"),t){case i.StoreTypes.Audio:this.Image.classList.add("ViewStoreTypeSound");break;default:this.Image.classList.add("ViewStoreTypeDefault")}this.Image.onclick=()=>{this.onStoreTypeActive(this)},this.HTML.appendChild(this.AudioVolumeDiv),this.HTML.appendChild(this.Image)}get InDemo(){return this.Image.classList.contains("ViewStoreTypeInDemo")}setInDemo(){this.Image.classList.add("ViewStoreTypeInDemo"),this.AudioVolumeDiv.classList.remove("AudioVolumeDivHide"),this.AudioVolumeDiv.classList.add("AudioVolumeDivSample"),this.HTML_InputAudioVolume.style.display=""}setHide(){this.Image.classList.remove("ViewStoreTypeInDemo"),this.AudioVolumeDiv.classList.remove("AudioVolumeDivSample"),this.AudioVolumeDiv.classList.add("AudioVolumeDivHide"),this.HTML_InputAudioVolume.style.display="none"}}class u{constructor(t,e,n,u,c,l){this.onDescriptionChange=t=>{},this.onPriceChange=t=>{},this.onSettingChange=(t,e)=>{},this.onButtonDeleteActive=t=>{},this.id=t,this.Type=e,this.Description=n,this.ItemsSettings=u,this.FileName=c,this.Price=l,this.ElementHTML_ID="InputFile"+this.id,this.DescriptionInput=new r.OrientedInput("text","DescriptionInput"),o.Texts.onLocaleChange=()=>this.DescriptionInput.Guidance=o.Texts.get("DescriptionInput"),this.PriceInput=new r.OrientedInput("number","PriceInput"),o.Texts.onLocaleChange=()=>this.PriceInput.Guidance=o.Texts.get("PriceInput"),this.ResponsiveInputFile=new r.ResponsiveInputFile(this.ElementHTML_ID,".mp3,.wav"),this.ViewStoreType=new a(this.Type,i.getItemsSetting("AudioVolume",this.ItemsSettings)),this.SingleReproductionSetting=new s(i.getItemsSetting("SingleReproduction",this.ItemsSettings)),this.HTML=document.createElement("div"),this.HTML.classList.add("StoreItem"),this.HTML.appendChild(this.ViewStoreType.HTML),this.HTML.appendChild(this.DescriptionInput.HTML),this.HTML.appendChild(this.PriceInput.HTML),this.HTML.appendChild(this.SingleReproductionSetting.HTML),this.HTML.appendChild(this.ResponsiveInputFile.HTML),this.HTML.appendChild(this.createDeleteButton()),this.SingleReproductionSetting.HTML.onchange=()=>{let t=i.getItemsSetting("SingleReproduction",this.ItemsSettings);t.Enable=this.SingleReproductionSetting.HTML_Input.checked,this.onSettingChange(this,t)},this.ViewStoreType.HTML_InputAudioVolume.onchange=()=>{let t=i.getItemsSetting("AudioVolume",this.ItemsSettings);t.Enable=!0,t.value=this.ViewStoreType.HTML_InputAudioVolume.value,this.onSettingChange(this,t)},this.DescriptionInput.HTML.onchange=()=>{this.onDescriptionChange(this)},this.PriceInput.HTML.onchange=()=>{this.onPriceChange(this)}}createDeleteButton(){return this.HTML_DeleteButton=document.createElement("button"),this.HTML_DeleteButton.classList.add("DeleteStoreItem"),this.HTML_DeleteButton.onclick=()=>{this.onButtonDeleteActive(this)},this.HTML_DeleteButton}}e.ViewStoreItem=u;e.default=class{constructor(){this.ViewStoreItems=[],this.HTML_StoreItemsDiv=document.getElementById("StoreItems"),this.HTML_DemoAudioPlayer=document.getElementById("DemoAudioPlayer"),this.HTML_AudioPlayer=document.getElementById("AudioPlayer"),this.onAddStoreItemSoundActive=()=>{},this.onStoreTypeActive=(t,e)=>{},this.onDescriptionChange=t=>{},this.onPriceChange=t=>{},this.onButtonDeleteActive=t=>{},this.onSettingOfItemChange=(t,e)=>{},this.onFileInputChange=t=>{},document.getElementById("AddStoreItem").onclick=()=>{this.onAddStoreItemSoundActive()}}addViewStoreItem(t){let e=1;this.ViewStoreItems.length>1?e=this.ViewStoreItems[this.ViewStoreItems.length-1].id+1:this.ViewStoreItems.length>0&&(e=this.ViewStoreItems[0].id+1);let n=new u(e,t.Type,t.Description,t.ItemsSettings,t.FileName,t.Price);return t.Description&&(n.DescriptionInput.value=t.Description,n.Description=t.Description),t.FileName&&n.ResponsiveInputFile.setUpgradeable(),t.Price&&(n.PriceInput.value=t.Price.toString(),n.Price=t.Price),n.onDescriptionChange=t=>{n.Description=t.DescriptionInput.HTML.value,this.onDescriptionChange(t)},n.onPriceChange=t=>{n.Price=Number(t.PriceInput.HTML.value),this.onPriceChange(t)},n.ResponsiveInputFile.HTML_InputFile.addEventListener("change",()=>{this.onFileInputChange(n)}),n.onSettingChange=(t,e)=>{this.onSettingOfItemChange(t,e)},n.onButtonDeleteActive=t=>{this.onButtonDeleteActive(t)},n.ViewStoreType.onStoreTypeActive=t=>{this.onStoreTypeActive(n,t)},this.ViewStoreItems.push(n),this.HTML_StoreItemsDiv.appendChild(n.HTML),n}removeStoreItem(t){this.HTML_StoreItemsDiv.removeChild(t.HTML),this.ViewStoreItems.splice(this.ViewStoreItems.indexOf(t),1)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,n){this.DonorFeatureName=t,this.Enable=e,this.value=n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.Token=t,this.StoreItem=e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(22),r=n(90),o=n(13),s=n(2),a=n(12),u=n(38),c=n(40),l=n(14),h=n(92);e.default=class{constructor(t,e,n){this.ViewPurchaseOrders=new r.default,this.PurchaseOrdersList=[],this.AudioPlayerIsUnlocked=!0,this.Token=t,this.StreamerID=e,this.Socket=n,this.loadingPurchaseOrders()}ExecuteOrder(t){this.ViewPurchaseOrders.HTML_AudioPlayer.src=l.getUrlOfFile(this.StreamerID,u.default.StoreItem+t.StoreItem.id,t.StoreItem.FileName),this.ViewPurchaseOrders.HTML_AudioPlayer.volume=i.getItemsSetting("AudioVolume",t.StoreItem.ItemsSettings).value/100,this.ViewPurchaseOrders.HTML_AudioPlayer.onplay=()=>{this.ViewPurchaseOrders.removeViewPurchaseOrder(t.ViewPurchasedItem),this.ViewPurchaseOrders.setRunningOrder(t.PurchaseOrder.TwitchUserID,t.StoreItem.Description),this.ViewPurchaseOrders.EnableAudioPlayerButtons(),this.ViewPurchaseOrders.setStarted(),this.ViewPurchaseOrders.HTML_AudioPlayer.onplay=null},this.ViewPurchaseOrders.HTML_PauseAudioPlayerButton.onclick=()=>{window.navigator.vibrate(50),this.ViewPurchaseOrders.IsStarted()?(this.ViewPurchaseOrders.setInPause(),this.ViewPurchaseOrders.HTML_AudioPlayer.pause()):(this.ViewPurchaseOrders.setStarted(),this.ViewPurchaseOrders.HTML_AudioPlayer.play())},this.ViewPurchaseOrders.HTML_RefundCurrentAudioButton.onclick=async()=>{this.ViewPurchaseOrders.HTML_AudioPlayer.pause(),this.nextOrder(!0)},this.ViewPurchaseOrders.HTML_AudioPlayer.play().catch(()=>{this.AudioPlayerIsUnlocked=!1,this.ViewPurchaseOrders.setPlaybackUnavailableMode(!0);let t=()=>{this.ViewPurchaseOrders.HTML_AudioPlayer.play(),document.body.removeEventListener("click",t),this.ViewPurchaseOrders.setPlaybackUnavailableMode(!1),this.AudioPlayerIsUnlocked=!0};document.body.addEventListener("click",t)}),this.ViewPurchaseOrders.HTML_AudioPlayer.ontimeupdate=t=>{this.ViewPurchaseOrders.setAudioPlayerProgress(this.ViewPurchaseOrders.HTML_AudioPlayer.currentTime/this.ViewPurchaseOrders.HTML_AudioPlayer.duration*100)},this.ViewPurchaseOrders.HTML_AudioPlayer.onended=()=>this.nextOrder(!1)}nextOrder(t){let e=this.PurchaseOrdersList.shift().PurchaseOrder;h.DeletePurchaseOrder(this.Token,e,t),this.PurchaseOrdersList[0]?this.ExecuteOrder(this.PurchaseOrdersList[0]):this.ViewPurchaseOrders.setInPurchaseOrdersEmpty(),s.NotifyViewers({ListenerName:a.default.onDeletePurchaseOrder,data:e})}async setListener(){this.ViewPurchaseOrders.onButtonPurchaseOrderRefundActive=async(t,e)=>{this.AudioPlayerIsUnlocked&&(this.ViewPurchaseOrders.removeViewPurchaseOrder(t),this.PurchaseOrdersList.splice(t.id,1),await h.DeletePurchaseOrder(this.Token,e,!0),s.NotifyViewers({ListenerName:a.default.onDeletePurchaseOrder,data:e}))}}async loadingPurchaseOrders(){this.ViewPurchaseOrders.onAddPurchaseOrder=t=>{this.PurchaseOrdersList.push(t),1===this.PurchaseOrdersList.length&&this.ExecuteOrder(t)},(await h.GetPurchaseOrders(this.StreamerID)).forEach(async t=>{let e=await c.GetStore(this.StreamerID,t.StoreItemID);e?this.ViewPurchaseOrders.addViewPurchaseOrder(t,e):h.DeletePurchaseOrder(this.Token,t,!0)}),this.Socket.on(o.default.onAddPurchasedItem,async t=>{let e=await c.GetStore(this.StreamerID,t.StoreItemID);this.ViewPurchaseOrders.addViewPurchaseOrder(t,e),i.getItemsSetting("SingleReproduction",e.ItemsSettings).Enable&&s.NotifyViewers({ListenerName:a.default.onAddPurchasedItem,data:t})}),this.setListener()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewPurchasedItem=void 0;const i=n(91),r=n(36),o=n(2);class s{constructor(t){this.PurchaseTime=t,this.HTML=document.createElement("span"),this.HTML.classList.add("PurchaseTime"),this.updateTime()}updateTime(){let t=(new Date).getTime()-this.PurchaseTime;if(t/=1e3,t<60){let e=Math.round(t);return o.Texts.onLocaleChange=()=>{this.HTML.innerText=`${e} ${o.Texts.get("Second")}${e>1?"s":""}`},this.HTML.innerText}if(t/=60,t<60){let e=Math.round(t);return o.Texts.onLocaleChange=()=>{this.HTML.innerText=`${e} ${o.Texts.get("Minute")}${e>1?"s":""}`},this.HTML.innerText}if(t/=60,t<60){let e=Math.round(t);return o.Texts.onLocaleChange=()=>{this.HTML.innerText=`${e} ${o.Texts.get("Hour")}${e>1?"s":""}`},this.HTML.innerText}let e=Math.round(t);return o.Texts.onLocaleChange=()=>{this.HTML.innerText=`${e} ${o.Texts.get("Days")}`},this.HTML.innerText}}class a{constructor(t,e,n,i){this.onRefundButtonActive=()=>{},this.ID=t,this.HTML=document.createElement("div"),this.HTML.classList.add("PurchasedItem"),this.ViewPurchaseTime=new s(n),this.HTML.appendChild(this.CreateHTML_ItemPlacement(t+1)),this.HTML.appendChild(this.CreateHTML_UserName(e)),this.HTML.appendChild(this.ViewPurchaseTime.HTML),this.HTML.appendChild(this.CreateHTML_ItemName(i)),this.HTML.appendChild(this.CreateHTML_RefundButton())}CreateHTML_ItemPlacement(t){return this.HTML_ItemPlacement=document.createElement("span"),this.HTML_ItemPlacement.classList.add("ItemPlacement"),this.HTML_ItemPlacement.innerText=t+"°",this.HTML_ItemPlacement}CreateHTML_UserName(t){return this.HTML_UserName=document.createElement("span"),this.HTML_UserName.classList.add("UserName"),this.HTML_UserName.innerText="@"+t,this.HTML_UserName}CreateHTML_ItemName(t){return this.HTML_ItemName=document.createElement("span"),this.HTML_ItemName.classList.add("ItemName"),this.HTML_ItemName.innerText=t,this.HTML_ItemName}CreateHTML_RefundButton(){return this.HTML_RefundButton=document.createElement("button"),this.HTML_RefundButton.classList.add("RefundButton"),o.Texts.onLocaleChange=()=>{this.HTML_RefundButton.innerText=o.Texts.get("Refund")},this.HTML_RefundButton.onclick=()=>{this.onRefundButtonActive()},this.HTML_RefundButton}get id(){return this.ID}set id(t){this.ID=t,this.HTML_ItemPlacement.innerText=t+1+"°"}}e.ViewPurchasedItem=a;e.default=class{constructor(){this.ViewPurchaseOrdersArray=[],this.HTML_PurchaseOrdersDiv=document.getElementById("PurchaseOrdersDiv"),this.HTML_ReproducingMedia=document.getElementById("ReproducingMedia"),this.HTML_PlaybackUserName=document.getElementById("PlaybackUserName"),this.HTML_PlaybackItemName=document.getElementById("PlaybackItemName"),this.HTML_PauseAudioPlayerButton=document.getElementById("PauseAudioPlayerButton"),this.HTML_RefundCurrentAudioButton=document.getElementById("RefundCurrentAudioButton"),this.HTML_ListOfPurchasedItems=document.getElementById("ListOfPurchasedItems"),this.HTML_LoadingBarOfAudioPlayer=document.getElementById("LoadingBarOfAudioPlayer"),this.HTML_AudioPlayer=document.getElementById("AudioPlayer"),this.onButtonPurchaseOrderRefundActive=(t,e)=>{},this.onAddPurchaseOrder=t=>{},this.updateViewPurchaseOrdersTime()}IsStarted(){return this.HTML_PauseAudioPlayerButton.classList.contains("Started")}EnableAudioPlayerButtons(){this.HTML_PauseAudioPlayerButton.classList.remove("Disable"),this.HTML_RefundCurrentAudioButton.classList.remove("Disable")}DisableAudioPlayerButtons(){this.HTML_PauseAudioPlayerButton.classList.add("Disable"),this.HTML_RefundCurrentAudioButton.classList.add("Disable")}setStarted(){this.HTML_ReproducingMedia.classList.remove("PurchaseOrdersEmpty"),this.HTML_ReproducingMedia.classList.add("PurchaseOrdersNotEmpty"),this.HTML_PauseAudioPlayerButton.classList.remove("InPause"),this.HTML_PauseAudioPlayerButton.classList.add("Started")}setInPause(){this.HTML_PauseAudioPlayerButton.classList.remove("Started"),this.HTML_PauseAudioPlayerButton.classList.add("InPause")}setInPurchaseOrdersEmpty(){this.HTML_ReproducingMedia.classList.remove("PurchaseOrdersNotEmpty"),this.HTML_ReproducingMedia.classList.add("PurchaseOrdersEmpty")}setAudioPlayerProgress(t){r.CrateLinerAnimation(this.AudioProgress,t,200,t=>{let e=t,n=t;this.HTML_LoadingBarOfAudioPlayer.style.backgroundImage=`linear-gradient(to left, rgb(80, 40, 134) ${n}%, rgb(116, 30, 251) ${e}%,rgb(87, 47, 148) 90%)`}),this.AudioProgress=t}setRunningOrder(t,e){this.HTML_PlaybackUserName.innerText=t,this.HTML_PlaybackItemName.innerText=e}setPlaybackUnavailableMode(t){t?(this.HTML_PlaybackUnavailableAlert=document.createElement("div"),this.HTML_PlaybackUnavailableAlert.classList.add("PlaybackUnavailableAlert"),this.HTML_PlaybackUnavailableAlert.style.width=this.HTML_PurchaseOrdersDiv.clientWidth+"px",this.HTML_PlaybackUnavailableAlert.style.height=this.HTML_PurchaseOrdersDiv.clientHeight+"px",this.ResizeObserver=new ResizeObserver(()=>{this.HTML_PlaybackUnavailableAlert.style.width=this.HTML_PurchaseOrdersDiv.clientWidth+"px",this.HTML_PlaybackUnavailableAlert.style.height=this.HTML_PurchaseOrdersDiv.clientHeight+"px"}),this.ResizeObserver.observe(this.HTML_PurchaseOrdersDiv),this.HTML_PurchaseOrdersDiv.insertBefore(this.HTML_PlaybackUnavailableAlert,this.HTML_ReproducingMedia)):(this.ResizeObserver.unobserve(this.HTML_PurchaseOrdersDiv),this.ResizeObserver.disconnect(),this.HTML_PurchaseOrdersDiv.removeChild(this.HTML_PlaybackUnavailableAlert))}addViewPurchaseOrder(t,e){let n=new a(this.ViewPurchaseOrdersArray.length,t.TwitchUserID,new Date(t.updatedAt).getTime(),e.Description);this.ViewPurchaseOrdersArray.push(n),n.onRefundButtonActive=()=>{this.onButtonPurchaseOrderRefundActive(n,t)},this.onAddPurchaseOrder(new i.PurchaseOrderItem(n,t,e)),this.HTML_ListOfPurchasedItems.appendChild(n.HTML)}removeViewPurchaseOrder(t){this.HTML_ListOfPurchasedItems.removeChild(t.HTML),this.ViewPurchaseOrdersArray.splice(t.id,1),this.ViewPurchaseOrdersArray.forEach((t,e)=>{t.id=e})}updateViewPurchaseOrdersTime(){setTimeout(()=>{this.ViewPurchaseOrdersArray.forEach(t=>{t.ViewPurchaseTime.updateTime()}),this.updateViewPurchaseOrdersTime()},this.ViewPurchaseOrdersArray.length>1?1e3:1e4)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PurchaseOrderItem=void 0;e.PurchaseOrderItem=class{constructor(t,e,n){this.ViewPurchasedItem=t,this.PurchaseOrder=e,this.StoreItem=n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetPurchaseOrders=e.DeletePurchaseOrder=e.addPurchaseOrder=void 0;const i=n(4),r=n(93),o=n(0),s=n(94),a=n(1);e.addPurchaseOrder=async function(t,e,n){let s=new Headers;return s.append("Content-Type","application/json"),fetch(a.default.URL+i.PurchaseOrderRoute,{method:"POST",headers:s,body:JSON.stringify(new r.default(t,e,n.id))}).then(t=>t.ok?t.json():(console.error(t),o.reject(t)))},e.DeletePurchaseOrder=async function(t,e,n){let r=new Headers;return r.append("Content-Type","application/json"),fetch(a.default.URL+i.PurchaseOrderRoute,{method:"DELETE",headers:r,body:JSON.stringify(new s.default(t,e.TwitchUserID,e.id,e.StoreItemID,e.SpentCoins,n))}).then(t=>t.ok?t.json():(console.error(t),o.reject(t)))},e.GetPurchaseOrders=async function(t){return fetch(a.default.URL+i.getPurchaseOrderRoute(t),{method:"GET"}).then(t=>t.ok?t.json():(console.error(t),o.reject(t)))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,n){this.Token=t,this.TwitchUserID=e,this.StoreItemID=n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,n,i,r,o){this.Token=t,this.TwitchUserID=e,this.PurchaseOrderID=n,this.StoreItemID=i,this.SpentCoins=r,this.Refund=o}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(3),r=n(96),o=n(97),s=n(98),a=n(37);e.default=class{constructor(t,e){this.ViewWallets=new r.default,this.Token=t,this.StreamerID=e,this.loadingWallets()}async EnableAllCommands(){let t=async()=>{let t=this.ViewWallets.HTML_SearchInput.value;""!==t?(await this.WatchWallets.stop(),this.ViewWallets.update(await o.GetWallets(this.StreamerID,t))):this.WatchWallets.start()};this.ViewWallets.HTML_SearchInput.onchange=t,this.ViewWallets.HTMl_SearchInputButton.onclick=t;let e=!1;this.ViewWallets.onWalletInputChange=(t,n)=>{e=!0,n.InputOfCoinsOfWalletOfUser.setChangedInput(),o.ManagerWallets(new s.WalletManagerRequest(this.Token,t,Number(n.InputOfCoinsOfWalletOfUser.HTML.value))).then(async()=>{n.InputOfCoinsOfWalletOfUser.setInputSuccessfully(),await i.sleep(500),n.InputOfCoinsOfWalletOfUser.setUnchangedInput()}).catch(t=>{n.InputOfCoinsOfWalletOfUser.setInputError()})};let n=()=>setTimeout(()=>{e?n():this.WatchWallets.start(),e=!1},5e3);this.ViewWallets.onWalletInputInFocus=async()=>{e=!0,await this.WatchWallets.stop(),n()}}loadingWallets(){this.WatchWallets=new a.Observer(()=>o.GetWallets(this.StreamerID),200),this.WatchWallets.OnWatch=t=>this.ViewWallets.update(t),this.EnableAllCommands()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewWallet=void 0;const i=n(21);class r{constructor(t,e,n){this.HTML=document.createElement("div"),this.HTML.classList.add("WalletOfUser");let r=document.createElement("input");r.classList.add("CoinsOfWalletOfUser"),r.type="number",r.max="9999999",this.InputOfCoinsOfWalletOfUser=new i.ResponsiveInput(r),this.InputOfCoinsOfWalletOfUser.setUnchangedInput(),this.InputOfCoinsOfWalletOfUser.HTML.value=n.toString(),this.HTML.appendChild(this.createPlacing(t)),this.HTML.appendChild(this.createTwitchUserID(e)),this.HTML.appendChild(this.InputOfCoinsOfWalletOfUser.HTML)}createPlacing(t){let e=document.createElement("span");return e.classList.add("Placing"),e.innerText="#"+t,e}createTwitchUserID(t){let e=document.createElement("span");return e.classList.add("TwitchUserID"),e.innerText="@"+t,e}}e.ViewWallet=r;e.default=class{constructor(){this.HTML_DivOfWallets=document.getElementById("DivOfWallets"),this.HTML_SearchInput=document.getElementById("SearchInput"),this.HTMl_SearchInputButton=document.getElementById("SearchInputButton"),this.onWalletInputChange=(t,e)=>{},this.onWalletInputInFocus=(t,e)=>{},this.onWalletInputFocusOut=(t,e)=>{}}update(t){this.HTML_DivOfWallets.innerHTML="",t.forEach((t,e)=>{let n=new r(e+1,t.TwitchUserID,~~t.Coins);n.InputOfCoinsOfWalletOfUser.HTML.onchange=()=>{this.onWalletInputChange(t.TwitchUserID,n)},n.InputOfCoinsOfWalletOfUser.HTML.onfocus=()=>{this.onWalletInputInFocus(t.TwitchUserID,n)},n.InputOfCoinsOfWalletOfUser.HTML.addEventListener("focusout",()=>{this.onWalletInputFocusOut(t.TwitchUserID,n)}),this.HTML_DivOfWallets.appendChild(n.HTML)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ManagerWallets=e.GetWallets=e.GetWallet=void 0;const i=n(4),r=n(0),o=n(1);e.GetWallet=async function(t,e){return fetch(o.default.URL+i.getWalletRoute(t,e),{method:"GET"}).then(t=>t.ok?t.json():r.reject(t))},e.GetWallets=async function(t,e="*"){return fetch(o.default.URL+i.getWalletsRoute(t,e),{method:"GET"}).then(t=>t.ok?t.json():r.reject(t))},e.ManagerWallets=async function(t){let e=new Headers;return e.append("Content-Type","application/json"),fetch(o.default.URL+i.WalletManager,{method:"POST",headers:e,body:JSON.stringify(t)}).then(t=>t.ok?t.json():r.reject(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletManagerRequest=void 0;e.WalletManagerRequest=class{constructor(t,e,n){this.Token=t,this.TwitchUserID=e,this.newValue=n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InsertTextInHardCode=e.LocalizedTexts=e.LocalizedText=void 0;e.LocalizedText=class{constructor(t,e,n){this.id=t,this.Text=e,this.Instruction=n}};e.LocalizedTexts=class{constructor(t){this.LocalizedTexts=[],this.Listeners=[],this.update(t)}update(t){t.forEach(t=>{this.LocalizedTexts[t.id]=t}),this.Listeners.forEach(t=>t())}get(t){return this.LocalizedTexts[t]?this.LocalizedTexts[t].Text:""}getInstruction(t){return this.LocalizedTexts[t]?this.LocalizedTexts[t].Instruction:""}set onLocaleChange(t){this.Listeners.push(t),t()}},e.InsertTextInHardCode=function(t){t.forEach(t=>{let e=document.getElementById(t.id);e.innerHTML=t.Text,e.title=t.Instruction})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTransitionsByUser=e.updateTransitionsByUser=void 0;const i=n(4),r=n(0),o=n(1);e.updateTransitionsByUser=async function(t){let e=new Headers;return e.append("Content-Type","application/json"),fetch(o.default.URL+i.UpdateTransitionsByUser,{method:"POST",headers:e,body:JSON.stringify(t)}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))},e.getTransitionsByUser=async function(t){let e=new Headers;return e.append("token",t),fetch(o.default.URL+i.GetTransitionsByUser,{method:"GET",headers:e}).then(t=>t.ok?t.json():(console.error(t),r.reject(t)))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateTransitionsByUserRequest=void 0;e.UpdateTransitionsByUserRequest=class{constructor(t,e){this.Token=t,this.Transaction=e}}}]);